{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/auth/auth.component.ts","webpack:///src/app/auth/auth.component.html","webpack:///src/app/auth/goal-container/goal-container.component.ts","webpack:///src/app/auth/goal-container/goal-container.component.html","webpack:///src/app/auth/goals/goals.ts","webpack:///src/app/auth/goals/join-room/join-room.component.ts","webpack:///src/app/auth/goals/join-room/join-room.component.html","webpack:///src/app/auth/goals/sign-in/sign-in.component.ts","webpack:///src/app/auth/goals/sign-in/sign-in.component.html","webpack:///src/app/auth/goals/sign-up/sign-up.component.ts","webpack:///src/app/auth/goals/sign-up/sign-up.component.html","webpack:///src/app/handler.ts","webpack:///src/app/home/activities/activities.ts","webpack:///src/app/home/activities/chat/chat-message.directive.ts","webpack:///src/app/home/activities/chat/chat-message/chat-message.component.ts","webpack:///src/app/home/activities/chat/chat-message/chat-message.component.html","webpack:///src/app/home/activities/chat/chat.component.ts","webpack:///src/app/home/activities/chat/chat.component.html","webpack:///src/app/home/activities/settings/room-invitation.directive.ts","webpack:///src/app/home/activities/settings/room-invitation/room-invitation.component.ts","webpack:///src/app/home/activities/settings/room-invitation/room-invitation.component.html","webpack:///src/app/home/activities/settings/room-link.directive.ts","webpack:///src/app/home/activities/settings/room-link/room-link.component.ts","webpack:///src/app/home/activities/settings/room-link/room-link.component.html","webpack:///src/app/home/activities/settings/settings.component.ts","webpack:///src/app/home/activities/settings/settings.component.html","webpack:///src/app/home/activities/stats/loading-monetization/loading-monetization.component.ts","webpack:///src/app/home/activities/stats/loading-monetization/loading-monetization.component.html","webpack:///src/app/home/activities/stats/monetized/monetized.component.ts","webpack:///src/app/home/activities/stats/monetized/monetized.component.html","webpack:///src/app/home/activities/stats/not-monetized/not-monetized.component.ts","webpack:///src/app/home/activities/stats/not-monetized/not-monetized.component.html","webpack:///src/app/home/activities/stats/stats.component.ts","webpack:///src/app/home/activities/stats/stats.component.html","webpack:///src/app/home/activities/store/store.component.ts","webpack:///src/app/home/activities/store/store.component.html","webpack:///src/app/home/activities/tasks.service.ts","webpack:///src/app/home/activities/tasks/list.directive.ts","webpack:///src/app/home/activities/tasks/list/filter-popup.directive.ts","webpack:///src/app/home/activities/tasks/list/filter-popup/filter-popup.component.ts","webpack:///src/app/home/activities/tasks/list/filter-popup/filter-popup.component.html","webpack:///src/app/home/activities/tasks/list/filter-popup/tag.directive.ts","webpack:///src/app/home/activities/tasks/list/filter-popup/tag/tag.component.ts","webpack:///src/app/home/activities/tasks/list/filter-popup/tag/tag.component.html","webpack:///src/app/home/activities/tasks/list/list.component.ts","webpack:///src/app/home/activities/tasks/list/list.component.html","webpack:///src/app/home/activities/tasks/list/task.directive.ts","webpack:///src/app/home/activities/tasks/list/task/task.component.ts","webpack:///src/app/home/activities/tasks/list/task/task.component.html","webpack:///src/app/home/activities/tasks/lists.service.ts","webpack:///src/app/home/activities/tasks/task-editor-popup.directive.ts","webpack:///src/app/home/activities/tasks/task-editor-popup/task-editor-popup.component.ts","webpack:///src/app/home/activities/tasks/task-editor-popup/task-editor-popup.component.html","webpack:///src/app/home/activities/tasks/tasks.component.ts","webpack:///src/app/home/activities/tasks/tasks.component.html","webpack:///src/app/home/activities/timer.service.ts","webpack:///src/app/home/activities/timer/timer.component.ts","webpack:///src/app/home/activities/timer/timer.component.html","webpack:///src/app/home/activity-container.component.ts","webpack:///src/app/home/activity-container.component.html","webpack:///src/app/home/header/header.component.ts","webpack:///src/app/home/header/header.component.html","webpack:///src/app/home/home.component.ts","webpack:///src/app/home/home.component.html","webpack:///src/app/home/menu/menu.component.ts","webpack:///src/app/home/menu/menu.component.html","webpack:///src/app/home/room-change.service.ts","webpack:///src/app/home/room/images.ts","webpack:///src/app/home/room/object-factory.ts","webpack:///src/app/home/room/room.component.ts","webpack:///src/app/home/room/room.component.html","webpack:///src/app/home/room/root/player/player-tooltip.directive.ts","webpack:///src/app/home/room/root/player/player-tooltip/player-tooltip.component.ts","webpack:///src/app/home/room/root/player/player-tooltip/player-tooltip.component.html","webpack:///src/app/home/room/root/player/player.ts","webpack:///src/app/home/room/root/tile-map.ts","webpack:///src/app/landing-page/landing-page/landing-page.component.ts","webpack:///src/app/landing-page/landing-page/landing-page.component.html","webpack:///src/app/panel-header/panel-header.component.ts","webpack:///src/app/panel-header/panel-header.component.html","webpack:///src/app/socket/socket.service.ts","webpack:///src/app/web-monetization/web-monetization.service.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","routes","path","component","AppRoutingModule","forRoot","imports","AppComponent","title","selector","templateUrl","styleUrls","AppModule","register","enabled","production","declarations","entryComponents","providers","bootstrap","AuthComponent","GoalContainerComponent","location","replaceState","updateGoal","getState","onUrlChange","msg","has","console","log","url","state","goal","includes","replace","visibleGoals","document","getElementsByClassName","i","length","visibleGoal","classList","remove","newVisibleGoal","getElementById","add","goals","JoinRoomComponent","socketService","route","header","faUsers","memberCount","roomId","snapshot","paramMap","get","reply","subscribe","onResponseReceived","sendMessage","channel","type","room_id","s","hiddens","hidden","roomTitle","forms","form","toggle","window","href","navigate","sessionStorage","setItem","joinRoom","goHome","SignInComponent","f","submission","username","value","password","error","innerHTML","onSubmit","SignUpComponent","Handler","group","toUpperCase","activities","ChatMessageDirective","viewContainerRef","ChatMessageComponent","ChatComponent","roomChangeService","componentFactoryResolver","onRoomChange","allChatsLoaded","chatMessageHost","clear","forEach","data","loadChat","display_name","sent_date","contents","chat_id","event","chatField","getItem","preventDefault","list","scrollTop","before_chat_id","earliestChatId","recent","componentFactory","resolveComponentFactory","componentRef","createComponent","instance","onListScroll","onSendChat","RoomInvitationDirective","RoomInvitationComponent","invitationId","invitation_id","declineInvitation","RoomLinkDirective","RoomLinkComponent","as_player","enterRoom","SettingsComponent","roomPrivate","roomLink","undefined","removeItem","displayName","roomLinkHost","numRooms","Object","name","loadRoomLink","privacyForms","index","privacyForm","setRoom","reloadRooms","roomInvitationHost","invitations","invitation","loadInvitation","reloadInvitations","invitee","onSubmitDisplayName","onToggleRoomPrivacy","onSubmitInvite","onSubmitLeave","onSubmitJoin","onSubmitCreate","LoadingMonetizationComponent","MonetizedComponent","NotMonetizedComponent","StatsComponent","webMonetizationService","monetization","handleState","current","loading","getElementsByTagName","monetized","notMonetized","StoreComponent","TasksService","activeTaskSource","activeTask","asObservable","task_id","next","activeTaskId","providedIn","ListDirective","FilterPopupDirective","FilterPopupComponent","channelReply","onRequestTags","onAddTag","tag","loadTag","tagHost","titleField","min","Math","ceil","max","floor","color","random","addTag","TagDirective","TagComponent","ListComponent","listsService","disabled","filterPopupOpen","tasks","Map","taskViewRefs","list_id","lists","previousContainer","container","currentIndex","previousIndex","taskHost","move","taskId","item","listing_id","set","previousViewContainerRef","loadTask","onRequestTasksForList","onAddTask","checkDisable","onDeleteTask","openFilterPopup","closeFilterPopup","filterPopupHost","disabledLists","initialTasksSize","size","sort","a","b","indexOf","isListing","hostView","newTaskTitleField","active","blur","source","addTask","toggleTags","dropTask","TaskDirective","TaskComponent","tasksService","onRequestTask","openTask","startDragging","ListsService","TaskEditorPopupDirective","TaskEditorPopupComponent","isEditingTitle","enteredTitle","enteredDescription","modalContent","focus","activeElement","onClose","editTitle","saveTitle","saveDescription","changePublic","changeActive","removeTask","TasksComponent","listViewRefs","channelIsRegistered","handleTask","bind","element","scrollPosition","left","scrollLeft","x","clientX","dx","scrollBy","getSelection","empty","removeAllRanges","onRequestLists","loadList","push","listHost","getActivity","split","taskData","taskEditorPopupHost","closeTask","target","contains","TimerService","timerSource","TimerComponent","timerService","tabs","activeTaskData","timeToSubmit","joinedSession","rightVisibility","leftVisibility","startButtonDisplay","joinButtonDisplay","leaveButtonDisplay","participantsDisplay","snakeToCamel","changeRoom","timeRemaining","Date","time","setMinutes","sessionId","startTimer","timerSubscription","unsubscribe","second","countdown","participants","consumable","duration","is_break","session_id","newDate","getMinutes","getSeconds","stopTimer","setSeconds","addTime","start","join","leave","ActivityContainerComponent","updateActivity","activity","visibleActivities","visibleActivity","newVisibleActivity","HeaderComponent","signOutMessage","signOut","HomeComponent","history","pushState","activityContainer","room","splitPath","MenuComponent","faHome","faStore","faComments","faHourglass","faChartPie","faTasks","faCalendar","faCog","selectedElements","selectedElement","$event","RoomChangeService","changeSource","currentRoomId","images","ObjectFactory","objects","sceneId","object","RoomComponent","objectFactory","canvas","context","width","clientWidth","height","clientHeight","apply","onresize","makeObject","addChild","loop","update","render","player","parent","removeChild","position","roomPosition","offsetLeft","offsetTop","playerPositionCanvas","playerTooltipHost","closePlayerTooltip","PlayerTooltipDirective","PlayerTooltipComponent","marginBottom","subscription","toString","y","speed","Player","spriteSheet","image","frameWidth","frameHeight","animations","walkFR","frames","frameRate","idleFR","walkFL","idleFL","walkBR","idleBR","walkBL","idleBL","dy","frame","children","persistObjectId","padX","padY","onFocus","pressed","previouslyPressed","openPlayerTooltip","hovered","previouslyHovered","style","cursor","focused","setLineDash","lineWidth","strokeStyle","strokeRect","playAnimation","playingAnimation","shadow","opacity","distance","velocity","direction","reportLocation","nameTag","text","font","anchor","textAlign","normalize","right","backward","forward","message","createElement","round","appendChild","epsilon","TileMap","layers","img","tileEngine","tilewidth","tileheight","tilesets","firstgid","moveButton","disable","willEnable","pointer","position_x","position_y","setTimeout","enable","addObject","removeObject","LandingPageComponent","loggedIn","PanelHeaderComponent","SocketService","httpClient","unsentMessages","replySource","replySources","establishWebsocket","responseType","withCredentials","socket","setResponse","err","pop","WebMonetizationService","monetizationSource","webMonetizationExists","addEventListener","paymentPointer","requestId","Document","environment","bootstrapModule"],"mappings":"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","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { LandingPageComponent } from './landing-page/landing-page/landing-page.component';\r\nimport { AuthComponent } from './auth/auth.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LandingPageComponent\r\n\r\n  },\r\n  {\r\n    path: 'auth',\r\n    component: AuthComponent\r\n  },\r\n  {\r\n    path: 'auth/sign-in',\r\n    component: AuthComponent\r\n  },\r\n  {\r\n    path: 'auth/sign-up',\r\n    component: AuthComponent\r\n  },\r\n  {\r\n    path: 'home',\r\n    component: HomeComponent\r\n\r\n  },\r\n  {\r\n    path: 'home/room',\r\n    component: HomeComponent\r\n\r\n  },\r\n  {\r\n    path: 'home/store',\r\n    component: HomeComponent\r\n\r\n  },\r\n  {\r\n    path: 'home/stats',\r\n    component: HomeComponent\r\n  },\r\n  {\r\n    path: 'home/timer',\r\n    component: HomeComponent\r\n  },\r\n  {\r\n    path: 'home/chat',\r\n    component: HomeComponent\r\n  },\r\n  {\r\n    path: 'home/tasks/:taskId',\r\n    component: HomeComponent\r\n  },\r\n  {\r\n    path: 'home/tasks',\r\n    component: HomeComponent\r\n  },\r\n  {\r\n    path: 'home/settings',\r\n    component: HomeComponent\r\n  },\r\n  {\r\n    path: 'j/:roomId',\r\n    component: AuthComponent,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent {\r\n  title = 'cowork';\r\n}\r\n","<router-outlet></router-outlet>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { NgModule } from '@angular/core';\r\nimport { ClipboardModule } from '@angular/cdk/clipboard';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { HomeComponent } from './home/home.component';\r\nimport { MenuComponent } from './home/menu/menu.component';\r\nimport { HeaderComponent } from './home/header/header.component';\r\nimport { ActivityContainerComponent } from './home/activity-container.component';\r\nimport { PanelHeaderComponent } from './panel-header/panel-header.component';\r\nimport { StoreComponent } from './home/activities/store/store.component';\r\nimport { ChatComponent } from './home/activities/chat/chat.component';\r\nimport { TimerComponent } from './home/activities/timer/timer.component';\r\nimport { TasksComponent } from './home/activities/tasks/tasks.component';\r\nimport { LandingPageComponent } from './landing-page/landing-page/landing-page.component';\r\nimport { RoomComponent } from './home/room/room.component';\r\nimport { SignInComponent } from './auth/goals/sign-in/sign-in.component';\r\nimport { SignUpComponent } from './auth/goals/sign-up/sign-up.component';\r\nimport { JoinRoomComponent } from './auth/goals/join-room/join-room.component';\r\nimport { AuthComponent } from './auth/auth.component';\r\nimport { GoalContainerComponent } from './auth/goal-container/goal-container.component';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { SettingsComponent } from './home/activities/settings/settings.component';\r\nimport { RoomLinkDirective } from './home/activities/settings/room-link.directive';\r\nimport { RoomLinkComponent } from './home/activities/settings/room-link/room-link.component';\r\nimport { ChatMessageDirective } from './home/activities/chat/chat-message.directive';\r\nimport { ChatMessageComponent } from './home/activities/chat/chat-message/chat-message.component';\r\nimport { RoomInvitationDirective } from './home/activities/settings/room-invitation.directive';\r\nimport { RoomInvitationComponent } from './home/activities/settings/room-invitation/room-invitation.component';\r\nimport { ListDirective } from './home/activities/tasks/list.directive';\r\nimport { ListComponent } from './home/activities/tasks/list/list.component';\r\nimport { TaskComponent } from './home/activities/tasks/list/task/task.component';\r\nimport { TaskDirective } from './home/activities/tasks/list/task.directive';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome';\r\nimport { StatsComponent } from './home/activities/stats/stats.component';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { environment } from '../environments/environment';\r\nimport { TaskEditorPopupComponent } from './home/activities/tasks/task-editor-popup/task-editor-popup.component';\r\nimport { TaskEditorPopupDirective } from './home/activities/tasks/task-editor-popup.directive';\r\nimport { PlayerTooltipDirective } from './home/room/root/player/player-tooltip.directive';\r\nimport { PlayerTooltipComponent } from './home/room/root/player/player-tooltip/player-tooltip.component';\r\nimport { NotMonetizedComponent } from './home/activities/stats/not-monetized/not-monetized.component';\r\nimport { LoadingMonetizationComponent } from './home/activities/stats/loading-monetization/loading-monetization.component';\r\nimport { MonetizedComponent } from './home/activities/stats/monetized/monetized.component';\nimport { FilterPopupComponent } from './home/activities/tasks/list/filter-popup/filter-popup.component';\nimport { FilterPopupDirective } from './home/activities/tasks/list/filter-popup.directive';\nimport { TagComponent } from './home/activities/tasks/list/filter-popup/tag/tag.component';\nimport { TagDirective } from './home/activities/tasks/list/filter-popup/tag.directive';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    HomeComponent,\r\n    MenuComponent,\r\n    HeaderComponent,\r\n    ActivityContainerComponent,\r\n    PanelHeaderComponent,\r\n    StoreComponent,\r\n    ChatComponent,\r\n    TimerComponent,\r\n    TasksComponent,\r\n    StatsComponent,\r\n    LandingPageComponent,\r\n    RoomComponent,\r\n    GoalContainerComponent,\r\n    SignInComponent,\r\n    SignUpComponent,\r\n    AuthComponent,\r\n    SettingsComponent,\r\n    RoomLinkDirective,\r\n    RoomLinkComponent,\r\n    ChatMessageDirective,\r\n    ChatMessageComponent,\r\n    RoomInvitationDirective,\r\n    RoomInvitationComponent,\r\n    JoinRoomComponent,\r\n    ListDirective,\r\n    ListComponent,\r\n    TaskComponent,\r\n    TaskDirective,\r\n    TaskEditorPopupComponent,\r\n    TaskEditorPopupDirective,\r\n    PlayerTooltipComponent,\r\n    PlayerTooltipDirective,\r\n    NotMonetizedComponent,\r\n    LoadingMonetizationComponent,\r\n    MonetizedComponent,\r\n    FilterPopupComponent,\r\n    FilterPopupDirective,\r\n    TagComponent,\r\n    TagDirective,\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    FormsModule,\r\n    AppRoutingModule,\r\n    HttpClientModule,\r\n    DragDropModule,\r\n    FontAwesomeModule,\r\n    ClipboardModule,\r\n    ServiceWorkerModule.register('ngsw-worker.js', { enabled: environment.production })\r\n  ],\r\n  entryComponents: [RoomLinkComponent],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-auth',\r\n  templateUrl: './auth.component.html',\r\n  styleUrls: ['./auth.component.css']\r\n})\r\nexport class AuthComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void { }\r\n\r\n}\r\n","<div class=\"goal-container-parent\">\r\n    <app-goal-container></app-goal-container>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common'\r\nimport { goals } from '../goals/goals'\r\n\r\n\r\n@Component({\r\n  selector: 'app-goal-container',\r\n  templateUrl: './goal-container.component.html',\r\n  styleUrls: ['./goal-container.component.css']\r\n})\r\nexport class GoalContainerComponent implements OnInit {\r\n\r\n  location: Location;\r\n\r\n  constructor(location: Location) {\r\n    this.location = location;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.location.path() == '/auth') {\r\n      this.location.replaceState('/auth/sign-in');\r\n    }\r\n    this.updateGoal(this.location.path(), this.location.getState());\r\n    this.location.onUrlChange(this.updateGoal);\r\n  }\r\n\r\n  onMsgReceived(msg: Map<string, string>): void {\r\n    if (msg.has(\"error\")) {\r\n      console.log(msg[\"error\"]);\r\n    }\r\n  }\r\n\r\n  updateGoal(url: string, state: unknown): void {\r\n    let goal: string = \"\";\r\n    if (url.includes('/auth')) {\r\n      goal = url.replace('/auth', '');\r\n      goal = goal.replace('/', '');\r\n    }\r\n    else {\r\n      goal = \"join-room\";\r\n    }\r\n    let visibleGoals: HTMLCollection = document.getElementsByClassName(\"visible\");\r\n    let i: number = 0;\r\n    for (let i: number = 0; i < visibleGoals.length; i++) {\r\n      let visibleGoal: Element = document.getElementsByClassName(\"visible\")[i];\r\n      visibleGoal.classList.remove(\"visible\");\r\n    }\r\n    if (goals.includes(goal)) {\r\n      let newVisibleGoal: Element = document.getElementById(goal);\r\n      newVisibleGoal.classList.add(\"visible\");\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"header\"><h1>💤🎉 Slumber Party</h1></div>\r\n<div class=\"goals\">\r\n    <app-sign-in class=\"goal\" id=\"sign-in\"></app-sign-in>\r\n    <app-sign-up class=\"goal\" id=\"sign-up\"></app-sign-up>\r\n    <app-join-room class=\"goal\" id=\"join-room\"></app-join-room>\r\n</div>","import { Component } from '@angular/core';\r\n\r\nexport const goals: Array<string> = ['sign-in', 'sign-up', 'join-room'];","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common'\r\nimport { SocketService } from '../../../socket/socket.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { faUsers } from '@fortawesome/free-solid-svg-icons';\r\nimport { Goal } from '../goal';\r\n\r\n@Component({\r\n  selector: 'app-join-room',\r\n  templateUrl: './join-room.component.html',\r\n  styleUrls: ['./join-room.component.css']\r\n})\r\nexport class JoinRoomComponent implements OnInit, Goal {\r\n\r\n  header: string = \"Join the Party!\";\r\n  roomId: string;\r\n  roomTitle: string;\r\n  faUsers = faUsers;\r\n  memberCount = 0;\r\n\r\n  socketService: SocketService;\r\n  route: ActivatedRoute;\r\n\r\n  location: Location;\r\n\r\n  constructor(socketService: SocketService, route: ActivatedRoute, location: Location) {\r\n    this.socketService = socketService;\r\n    this.route = route;\r\n    this.location = location;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.location.path().includes(\"/j/\")) {\r\n      this.roomId = this.route.snapshot.paramMap.get('roomId');\r\n\r\n      this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n      this.socketService.sendMessage({channel: \"public\", type: \"request_room\", room_id: this.roomId});\r\n    }\r\n  }\r\n\r\n  navigate(s: string) {\r\n    this.location.replaceState(s);\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    console.log(msg);\r\n    if (msg[\"type\"] == \"request_room\") {\r\n      let hiddens: HTMLCollectionOf<Element> = document.getElementsByClassName(\"hidden-form\");\r\n        for (let i: number = 0; i < hiddens.length; i++) {\r\n          let hidden: Element = document.getElementsByClassName(\"hidden-form\")[i];\r\n          hidden.classList.remove(\"hidden-form\");\r\n        }\r\n      if (msg[\"title\"] != null) {\r\n        this.roomTitle = msg[\"title\"];\r\n        this.memberCount = msg[\"member_count\"];\r\n      }\r\n      else {\r\n        this.header = \"Invalid Room Link\";\r\n        let forms: HTMLCollectionOf<Element> = document.getElementsByClassName(\"join-form-element\");\r\n        for (let i: number = 0; i < forms.length; i++) {\r\n          let form: Element = document.getElementsByClassName(\"join-form-element\")[i];\r\n          form.classList.toggle(\"hidden-form\");\r\n        }\r\n      }\r\n    }\r\n    else if (msg[\"type\"] == \"request_invitations\") {\r\n      window.location.href = '/home';\r\n    }\r\n    else if (msg[\"type\"] == \"sign_in\" && !msg[\"password_correct\"]) {\r\n      this.navigate('/auth/sign-up');\r\n    }\r\n  }\r\n\r\n  joinRoom() {\r\n    sessionStorage.setItem(\"joinRoomId\", this.roomId);\r\n    sessionStorage.setItem(\"joinRoomTitle\", this.roomTitle);\r\n    this.socketService.sendMessage({channel: \"settings\", type: \"request_invitations\"});\r\n  }\r\n\r\n  goHome() {\r\n    window.location.href = '/home';\r\n  }\r\n\r\n}\r\n","<app-panel-header [header]=\"header\"></app-panel-header>\r\n<form class=\"hidden-form\">\r\n    <div class=\"join-form-element\">\r\n        <div class=\"users\"><fa-icon [icon]=\"faUsers\"></fa-icon> {{ memberCount }} members in this room</div>\r\n        <button (click)=\"joinRoom()\"><h2>Join {{ roomTitle }}</h2></button>\r\n    </div>\r\n    <div class=\"join-form-element hidden-form\">\r\n        <div class=\"users\">That join link's not valid!</div>\r\n        <button (click)=\"goHome()\"><h2>Go home</h2></button>\r\n    </div>\r\n</form>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { NgForm, FormsModule } from '@angular/forms'\r\nimport { Location } from '@angular/common';\r\nimport { SocketService } from '../../../socket/socket.service';\r\nimport { Goal } from '../goal';\r\n\r\n@Component({\r\n  selector: 'app-sign-in',\r\n  templateUrl: './sign-in.component.html',\r\n  styleUrls: ['./sign-in.component.css']\r\n})\r\nexport class SignInComponent implements OnInit, Goal {\r\n\r\n  header: string = \"Sign in to continue\";\r\n  location: Location;\r\n  ngForm: NgForm;\r\n  socketService: SocketService;\r\n\r\n  constructor(location: Location, socketService: SocketService) {\r\n    this.location = location;\r\n    this.socketService = socketService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n  }\r\n\r\n  onSubmit(f: NgForm) {\r\n    let submission = {channel: \"auth\", type: \"sign_in\", username: f.value[\"username\"], password: f.value[\"password\"]};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n  navigate(s: string) {\r\n    this.location.replaceState(s);\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    if (msg[\"type\"] == \"sign_in\") {\r\n      if (msg[\"password_correct\"]) {\r\n        if (msg[\"password_correct\"] == true && !this.location.path().includes('/j/')) {\r\n          document.location.href = \"/home\";\r\n        }\r\n      }\r\n      else if (msg[\"error\"]) {\r\n        let error: HTMLElement = document.getElementById(\"error\");\r\n        error.innerHTML = msg[\"error\"];\r\n        error.id = \"visible-error\";\r\n      }\r\n    }\r\n    else if (msg[\"type\"] == \"request_room\") {\r\n      if (msg[\"title\"] != null) {\r\n        this.header = \"Sign in to continue to \" + msg[\"title\"];\r\n      }\r\n    }\r\n  }\r\n}\r\n","<app-panel-header [header]=\"header\"></app-panel-header>\r\n<form #f=\"ngForm\" (ngSubmit)=\"onSubmit(f)\" novalidate>\r\n    <div class=\"form-element\">\r\n        <input type=\"text\" placeholder=\"Email address\" autocomplete=\"email\" name=\"username\" ngModel required>\r\n    </div>\r\n\r\n    <div class=\"form-element\">\r\n        <input type=\"password\" placeholder=\"Password\" autocomplete=\"current-password\" name=\"password\" ngModel required>\r\n    </div>\r\n\r\n    <div id=\"error\" class=\"form-element\">\r\n        \r\n    </div>\r\n\r\n    <div class=\"form-element\">\r\n        <button type=\"submit\"><h2>Sign in</h2></button>\r\n    </div>\r\n  \r\n    <div class=\"form-element\">\r\n        <span class=\"password\"><a (click)=\"navigate('/auth/sign-up')\">New here? Create an account</a></span>\r\n        <span class=\"password\"><a (click)=\"navigate('/auth/reset-password')\">Reset your password</a></span>\r\n    </div>\r\n</form>","import { Component, OnInit, Input } from '@angular/core';\r\nimport { NgForm, FormsModule } from '@angular/forms';\r\nimport { Location } from '@angular/common';\r\nimport { Goal } from '../goal';\r\nimport { SocketService } from '../../../socket/socket.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-sign-up',\r\n  templateUrl: './sign-up.component.html',\r\n  styleUrls: ['./sign-up.component.css']\r\n})\r\nexport class SignUpComponent implements OnInit, Goal {\r\n\r\n  header: string = \"Sign up for an account\"\r\n  location: Location;\r\n  ngForm: NgForm;\r\n  socketService: SocketService;\r\n\r\n  constructor(location: Location, socketService: SocketService) {\r\n    this.location = location;\r\n    this.socketService = socketService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n  }\r\n\r\n  onSubmit(f: NgForm) {\r\n    let submission = {channel: \"auth\", type: \"sign_up\", username: <string> f.value[\"username\"], password: <string> f.value[\"password\"]};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n  navigate(s: string) {\r\n    this.location.replaceState(s);\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    if (msg[\"type\"] == \"sign_up\") {\r\n      if (msg[\"password_correct\"] || msg[\"account_creation_success\"]) {\r\n        if (msg[\"password_correct\"] == true || msg[\"account_creation_success\"] == true) {\r\n          document.location.href = \"/home\";\r\n        }\r\n      }\r\n      else if (msg[\"error\"]) {\r\n        let error: HTMLElement = document.getElementById(\"error\");\r\n        error.innerHTML = msg[\"error\"];\r\n        error.id = \"visible-error\";\r\n      }\r\n    }\r\n    else if (msg[\"type\"] == \"request_room\") {\r\n      if (msg[\"title\"] != null) {\r\n        this.header = \"Sign up to continue to \" + msg[\"title\"];\r\n      }\r\n    }\r\n  }\r\n}\r\n","<app-panel-header [header]=\"header\"></app-panel-header>\r\n<form #f=\"ngForm\" (ngSubmit)=\"onSubmit(f)\" novalidate>\r\n    <div class=\"form-element\">\r\n        <input type=\"text\" placeholder=\"Email address\" autocomplete=\"email\" name=\"username\" ngModel required>\r\n    </div>\r\n\r\n    <div class=\"form-element\">\r\n        <input type=\"password\" placeholder=\"Password\" autocomplete=\"new-password\" name=\"password\" ngModel required>\r\n    </div>\r\n\r\n    <div id=\"error\" class=\"form-element\">\r\n        \r\n    </div>\r\n\r\n    <div class=\"form-element\">\r\n        <button type=\"submit\"><h2>Sign up</h2></button>\r\n    </div>\r\n  \r\n    <div class=\"form-element\">\r\n        <span class=\"password\"><a (click)=\"navigate('/auth/sign-in')\">Already have an account? Sign in</a></span>\r\n    </div>\r\n</form>","// Handlers have helper methods that allow them to communicate with the server\r\n// (initially, by converting the server's snake_case to camelCase)\r\n\r\nexport abstract class Handler {\r\n    snakeToCamel(s: string): string {\r\n      return s.replace(\r\n        /([-_][a-z])/g,\r\n        (group) => group.toUpperCase().replace('-', '').replace('_', '')\r\n      );\r\n    }\r\n}","export const activities: Array<string> = ['room', 'store', 'chat', 'timer', 'stats', 'tasks', 'settings'];","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appChatMessage]'\r\n})\r\nexport class ChatMessageDirective {\r\n\r\n  public viewContainerRef: ViewContainerRef\r\n\r\n  constructor(viewContainerRef: ViewContainerRef) {\r\n    this.viewContainerRef = viewContainerRef\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\n\r\n@Component({\r\n  selector: 'app-chat-message',\r\n  templateUrl: './chat-message.component.html',\r\n  styleUrls: ['./chat-message.component.css']\r\n})\r\nexport class ChatMessageComponent implements OnInit {\r\n\r\n  @Input() data: any;\r\n\r\n  socketService: SocketService;\r\n\r\n  constructor(socketService: SocketService) {\r\n    this.socketService = socketService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"chat-message\">\r\n    <div class=\"item\">\r\n        <div class=\"meta\">\r\n            <p class=\"author\">{{ data.display_name }}</p>\r\n            <p class=\"sent-date\" value=\"MM/dd/yyyy h:mm a\">{{ data.sent_date | date:'MM/dd/yyyy h:mm a'}}</p>\r\n        </div>\r\n        <p class=\"chat-contents\">{{ data.contents }}</p>\r\n    </div>\r\n</div>","import { Component, OnInit, ViewChild, ComponentFactoryResolver } from '@angular/core';\r\nimport { Activity } from '../activity';\r\nimport { ChatMessageDirective } from './chat-message.directive';\r\nimport { RoomChangeService } from '../../room-change.service';\r\nimport { ChatMessageComponent } from './chat-message/chat-message.component';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\n\r\n@Component({\r\n  selector: 'app-chat',\r\n  templateUrl: './chat.component.html',\r\n  styleUrls: ['./chat.component.css']\r\n})\r\nexport class ChatComponent implements OnInit, Activity {\r\n\r\n  @ViewChild(ChatMessageDirective, {static: true}) chatMessageHost: ChatMessageDirective;\r\n\r\n  header: string = \"Chat\";\r\n\r\n  roomChangeService: RoomChangeService;\r\n  componentFactoryResolver: ComponentFactoryResolver;\r\n  socketService: SocketService;\r\n\r\n  earliestChatId: string;\r\n  roomId: string;\r\n  allChatsLoaded: boolean;\r\n\r\n  constructor(socketService: SocketService, roomChangeService: RoomChangeService, componentFactoryResolver: ComponentFactoryResolver) {\r\n    this.socketService = socketService;\r\n    this.roomChangeService = roomChangeService;\r\n    this.componentFactoryResolver = componentFactoryResolver;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n    this.roomChangeService.roomId.subscribe(msg => this.onRoomChange(msg));\r\n  }\r\n\r\n  onRoomChange(roomId: string): void {\r\n    this.roomId = roomId;\r\n    document.getElementById(\"retrieving\").classList.remove(\"hidden\");\r\n    this.allChatsLoaded = false;\r\n    const viewContainerRef = this.chatMessageHost.viewContainerRef;\r\n    viewContainerRef.clear();\r\n    if (roomId != null) this.socketService.sendMessage({channel: \"chat\", type: \"request_initial_messages\", room_id: roomId});\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    if (msg[\"type\"] == \"request_messages\") {\r\n      if (msg[\"messages\"].length < 10) {\r\n        document.getElementById(\"retrieving\").classList.add(\"hidden\");\r\n        this.allChatsLoaded = true;\r\n      }\r\n      document.getElementById(\"retrieving-now\").classList.add(\"hidden\");\r\n      document.getElementById(\"load-more\").classList.remove(\"hidden\");\r\n      msg[\"messages\"].forEach(data => {\r\n        this.loadChat(data, false);\r\n      });\r\n    }\r\n    else if (msg[\"type\"] == \"send_message\") {\r\n      let data: any = {display_name: msg[\"display_name\"], sent_date: msg[\"sent_date\"], contents: msg[\"contents\"], chat_id: msg[\"chat_id\"]};\r\n      this.loadChat(data, true);\r\n    }\r\n  }\r\n\r\n  onSendChat(event: any): void {\r\n    let chatField: HTMLTextAreaElement = document.getElementById(\"chat-field\") as HTMLTextAreaElement;\r\n    let contents: string = chatField.value;\r\n    this.socketService.sendMessage({channel: \"chat\", type: \"send_message\", room_id: sessionStorage.getItem(\"room_id\"), contents: contents});\r\n    chatField.value = \"\";\r\n    event.preventDefault();\r\n  }\r\n\r\n  onListScroll(): void {\r\n    let list: Element = document.getElementById(\"list\");\r\n    document.getElementById(\"retrieving-now\").classList.remove(\"hidden\");\r\n    document.getElementById(\"load-more\").classList.add(\"hidden\");\r\n    if (list.scrollTop == 0 && !this.allChatsLoaded) {\r\n      this.socketService.sendMessage({channel: \"chat\", type: \"request_messages\", room_id: this.roomId, before_chat_id: this.earliestChatId});\r\n    }\r\n  }\r\n\r\n  loadChat(data: any, recent: boolean): void {\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(ChatMessageComponent);\r\n\r\n    const viewContainerRef = this.chatMessageHost.viewContainerRef;\r\n\r\n    let componentRef;\r\n    if (recent) {\r\n      componentRef = viewContainerRef.createComponent(componentFactory, 0);\r\n    }\r\n    else {\r\n      componentRef = viewContainerRef.createComponent(componentFactory);\r\n      this.earliestChatId = data[\"chat_id\"];\r\n    }\r\n    (<ChatMessageComponent>componentRef.instance).data = data;\r\n  }\r\n}\r\n","<div class=\"scroll-container\">\r\n    <app-panel-header [header]=\"header\"></app-panel-header>\r\n    <div id=\"list\" (scroll)=\"onListScroll()\" role=\"log\">\r\n        <ng-template appChatMessage></ng-template>\r\n        <p id=\"retrieving\">\r\n            <a id=\"load-more\" (click)=\"onListScroll()\">Load more messages</a>\r\n            <a class=\"hidden\" id=\"retrieving-now\">Retrieving more messages...</a>\r\n        </p>\r\n    </div>\r\n    <form id=\"chat-box\" novalidate>\r\n        <textarea id=\"chat-field\" class=\"contents\" tabindex=\"0\" (keydown.enter)=\"onSendChat($event)\" placeholder=\"Message the room...\"></textarea>\r\n    </form>\r\n</div>","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appRoomInvitation]'\r\n})\r\nexport class RoomInvitationDirective {\r\n\r\n  public viewContainerRef: ViewContainerRef;\r\n\r\n  constructor(viewContainerRef: ViewContainerRef) {\r\n    this.viewContainerRef = viewContainerRef\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\n\r\n@Component({\r\n  selector: 'app-room-invitation',\r\n  templateUrl: './room-invitation.component.html',\r\n  styleUrls: ['./room-invitation.component.css']\r\n})\r\nexport class RoomInvitationComponent implements OnInit {\r\n  data: any;\r\n  socketService: SocketService;\r\n\r\n  constructor(socketService: SocketService) {\r\n    this.socketService = socketService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  joinRoom(roomId: string): void {\r\n    let submission = {channel: \"settings\", type: \"join_room\", room_id: roomId};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n  declineInvitation(invitationId: string): void {\r\n    let submission = {channel: \"settings\", type: \"decline_invitation\", invitation_id: invitationId};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n}\r\n","<div class=\"invitation\">\r\n    <div class=\"item form\">\r\n        <p class=\"room-label\">{{ data.title }}</p>\r\n        <button (click)=\"declineInvitation(data.invitation_id)\"><div class=\"button-label\">Decline</div></button>\r\n        <button (click)=\"joinRoom(data.room_id)\"><div class=\"button-label\">Accept</div></button>\r\n    </div>\r\n</div>","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appRoomLink]'\r\n})\r\nexport class RoomLinkDirective {\r\n\r\n  public viewContainerRef: ViewContainerRef;\r\n\r\n  constructor(viewContainerRef: ViewContainerRef) {\r\n    this.viewContainerRef = viewContainerRef\r\n  }\r\n}\r\n","import { Component, OnInit, Input } from '@angular/core';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { NgForm } from '@angular/forms'\r\n\r\n@Component({\r\n  selector: 'app-room-link',\r\n  templateUrl: './room-link.component.html',\r\n  styleUrls: ['./room-link.component.css']\r\n})\r\nexport class RoomLinkComponent implements OnInit {\r\n\r\n  @Input() data: any;\r\n\r\n  socketService: SocketService\r\n\r\n  constructor(socketService: SocketService) {\r\n    this.socketService = socketService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  enterRoom(roomId: string, title: string): void {\r\n    this.socketService.sendMessage({channel: \"settings\", type: \"enter_room\", room_id: roomId, as_player: false});\r\n    sessionStorage.setItem(\"room_id\", roomId);\r\n    sessionStorage.setItem(\"room_title\", title);\r\n  }\r\n\r\n}\r\n","<div class=\"room-link form\">\r\n    <div class=\"item\"><p class=\"room-label\">{{ data.title }}</p><button (click)=\"enterRoom(data.room_id, data.title)\">Enter</button></div>\r\n</div>","import { Component, OnInit, ComponentFactoryResolver, ViewChild } from '@angular/core';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { RoomChangeService } from '../../room-change.service';\r\nimport { Activity } from '../activity';\r\nimport { RoomLinkDirective } from './room-link.directive';\r\nimport { RoomLinkComponent } from './room-link/room-link.component';\r\nimport { NgForm } from '@angular/forms';\r\nimport { RoomInvitationDirective } from './room-invitation.directive';\r\nimport { RoomInvitationComponent } from './room-invitation/room-invitation.component';\r\n\r\n@Component({\r\n  selector: 'app-settings',\r\n  templateUrl: './settings.component.html',\r\n  styleUrls: ['./settings.component.css']\r\n})\r\nexport class SettingsComponent implements OnInit, Activity {\r\n  \r\n  @ViewChild(RoomLinkDirective, {static: true}) roomLinkHost: RoomLinkDirective;\r\n  @ViewChild(RoomInvitationDirective, {static: true}) roomInvitationHost: RoomInvitationDirective;\r\n  \r\n  header: string = \"Settings\";\r\n  roomPrivate: boolean = true;\r\n  roomTitle: string = sessionStorage.getItem(\"room_title\");\r\n  roomId: string = sessionStorage.getItem(\"room_id\");\r\n  roomLink: string = \"https://cowork.ac/j/\" + this.roomId;\r\n\r\n  socketService: SocketService;\r\n  roomChangeService: RoomChangeService;\r\n  componentFactoryResolver: ComponentFactoryResolver;\r\n\r\n  displayName: string;\r\n\r\n  constructor(socketService: SocketService, roomChangeService: RoomChangeService, componentFactoryResolver: ComponentFactoryResolver) {\r\n    this.socketService = socketService;\r\n    this.roomChangeService = roomChangeService;\r\n    this.componentFactoryResolver = componentFactoryResolver;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n    this.roomChangeService.roomId.subscribe(msg => this.onRoomChange(msg));\r\n    this.socketService.sendMessage({channel: \"settings\", type: \"request_rooms\"});\r\n    this.socketService.sendMessage({channel: \"settings\", type: \"request_invitations\"});\r\n    if (sessionStorage.getItem(\"room_id\") != undefined) {\r\n      this.socketService.sendMessage({channel: \"settings\", type: \"enter_room\", room_id: sessionStorage.getItem(\"room_id\"), as_player: false});\r\n    }\r\n    if (sessionStorage.getItem(\"joinRoomId\") != undefined) {\r\n      this.socketService.sendMessage({channel: \"settings\", type: \"join_room\", room_id: sessionStorage.getItem(\"joinRoomId\")});\r\n      sessionStorage.removeItem(\"joinRoomId\");\r\n      sessionStorage.removeItem(\"joinRoomTitle\");\r\n    }\r\n    this.displayName = sessionStorage.getItem(\"display_name\");\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    console.log(\"Incoming message of type: \" + msg[\"type\"]);\r\n    if (msg[\"channel\"] == \"settings\") {\r\n      if (msg[\"type\"] == \"request_rooms\") {\r\n        const viewContainerRef = this.roomLinkHost.viewContainerRef;\r\n        viewContainerRef.clear();\r\n        let numRooms = Object.keys(msg[\"rooms\"]).length;\r\n        if (numRooms == 0) {\r\n          document.getElementById(\"room-settings\").classList.add(\"hidden\");\r\n          document.getElementById(\"enter-room\").classList.add(\"hidden\");\r\n        }\r\n        else if (numRooms == 1) {\r\n          document.getElementById(\"room-settings\").classList.remove(\"hidden\");\r\n          document.getElementById(\"enter-room\").classList.add(\"hidden\");\r\n        }\r\n        else {\r\n          document.getElementById(\"room-settings\").classList.remove(\"hidden\");\r\n          document.getElementById(\"enter-room\").classList.remove(\"hidden\");\r\n        }\r\n        for (let name in msg[\"rooms\"]) {\r\n          if (sessionStorage.getItem(\"room_id\") == null || sessionStorage.getItem(\"room_title\") == null) {\r\n            sessionStorage.setItem(\"room_id\", msg[\"rooms\"][name]);\r\n            sessionStorage.setItem(\"room_title\", name);\r\n            this.socketService.sendMessage({channel: \"settings\", type: \"enter_room\", room_id: msg[\"rooms\"][name], as_player: false});\r\n          }\r\n          if (!(msg[\"rooms\"][name] == sessionStorage.getItem(\"room_id\"))) {\r\n            let data: any = {title: name, room_id: msg[\"rooms\"][name]};\r\n            this.loadRoomLink(data);\r\n          }\r\n        }\r\n      }\r\n      else if (msg[\"type\"] == \"request_room_privacy\") {\r\n        if (msg[\"private\"] != this.roomPrivate) {\r\n          this.roomPrivate = msg[\"private\"];\r\n          let privacyForms: HTMLCollectionOf<Element> = document.getElementsByClassName(\"privacy-form\");\r\n          for (let index = 0; index < privacyForms.length; index++) {\r\n            const privacyForm = privacyForms[index];\r\n            privacyForm.classList.toggle(\"hidden\");\r\n          }\r\n        }\r\n      }\r\n      else if ( msg[\"type\"] == \"set_room_privacy\") {\r\n        if (msg[\"success\"] == true) {\r\n          this.roomPrivate = !this.roomPrivate;\r\n          let privacyForms: HTMLCollectionOf<Element> = document.getElementsByClassName(\"privacy-form\");\r\n          for (let index = 0; index < privacyForms.length; index++) {\r\n            const privacyForm = privacyForms[index];\r\n            privacyForm.classList.toggle(\"hidden\");\r\n          }\r\n        }\r\n      }\r\n      else if (msg[\"type\"] == \"enter_room\") {\r\n        if (msg[\"success\"] == true) {\r\n          console.log(\"Entered a room.\");\r\n          sessionStorage.setItem(\"room_title\", msg[\"room_title\"]);\r\n          sessionStorage.setItem(\"room_id\", msg[\"room_id\"]);\r\n          this.roomTitle = sessionStorage.getItem(\"room_title\");\r\n          this.roomChangeService.setRoom(msg[\"room_id\"]);\r\n        }\r\n        else {\r\n          console.error(\"Failed to enter the room.\");\r\n        }\r\n      }\r\n      else if (msg[\"type\"] == \"join_room\") {\r\n        this.reloadRooms();\r\n      }\r\n      else if (msg[\"type\"] == \"request_invitations\") {\r\n        const viewContainerRef = this.roomInvitationHost.viewContainerRef;\r\n        viewContainerRef.clear();\r\n        let invitations = msg[\"invitations\"];\r\n        if (invitations.length > 0) {\r\n          document.getElementById(\"invitations\").classList.remove(\"hidden\");\r\n          invitations.forEach(invitation => {\r\n            let data: any = {title: invitation[\"room_title\"], room_id: invitation[\"room_id\"], \r\n            username: invitation[\"username\"], invitation_id: invitation[\"invitation_id\"]};\r\n            this.loadInvitation(data);\r\n          });\r\n        }\r\n        else {\r\n          document.getElementById(\"invitations\").classList.add(\"hidden\");\r\n        }\r\n      }\r\n      else if (msg[\"type\"] == \"decline_invitation\") {\r\n        this.reloadInvitations();\r\n      }\r\n      else if (msg[\"type\"] == \"create_room\") {\r\n        this.socketService.sendMessage({channel: \"settings\", type: \"enter_room\", room_id: msg[\"room_id\"], as_player: false});\r\n      }\r\n      else if (msg[\"type\"] == \"leave_room\") {\r\n        if (msg[\"success\"] == true) {\r\n          sessionStorage.removeItem(\"room_title\");\r\n          sessionStorage.removeItem(\"room_id\");\r\n          console.log(sessionStorage.removeItem(\"room_title\"));\r\n          console.log(sessionStorage.removeItem(\"room_id\"));\r\n          this.reloadRooms();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onSubmitDisplayName(f: NgForm) {\r\n    let submission = {channel: \"settings\", type: \"edit_display_name\", display_name: <string> f.value[\"display_name\"]};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n  loadRoomLink(data: any): void {\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(RoomLinkComponent);\r\n\r\n    const viewContainerRef = this.roomLinkHost.viewContainerRef;\r\n\r\n    const componentRef = viewContainerRef.createComponent(componentFactory);\r\n    (<RoomLinkComponent>componentRef.instance).data = data;\r\n  }\r\n\r\n  reloadRooms(): void {\r\n    this.socketService.sendMessage({channel: \"settings\", type: \"request_rooms\"});\r\n  }\r\n\r\n  loadInvitation(data: any): void {\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(RoomInvitationComponent);\r\n\r\n    const viewContainerRef = this.roomInvitationHost.viewContainerRef;\r\n\r\n    const componentRef = viewContainerRef.createComponent(componentFactory);\r\n    (<RoomInvitationComponent>componentRef.instance).data = data;\r\n  }\r\n\r\n  reloadInvitations(): void {\r\n    this.socketService.sendMessage({channel: \"settings\", type: \"request_invitations\"});\r\n  }\r\n\r\n  onRoomChange(roomId: string): void {\r\n    this.socketService.sendMessage({channel: \"settings\", type: \"request_room_privacy\", room_id: roomId});\r\n    document.getElementById(\"room-title\").innerHTML = sessionStorage.getItem(\"room_title\");\r\n    this.roomId = roomId;\r\n    this.roomLink = \"https://cowork.ac/j/\" + this.roomId;\r\n    this.reloadRooms();\r\n  }\r\n\r\n  onSubmitInvite(f: NgForm): void {\r\n    let submission = {channel: \"settings\", type: \"create_invitation\", room_id: sessionStorage.getItem(\"room_id\"), invitee: <string> f.value[\"username\"]};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n  onSubmitJoin(f: NgForm): void {\r\n    let submission = {channel: \"settings\", type: \"join_room\", room_id: <string> f.value[\"joinCode\"]};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n  onSubmitLeave(): void {\r\n    let submission = {channel: \"settings\", type: \"leave_room\", room_id: sessionStorage.getItem(\"room_id\")};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n  onSubmitCreate(f: NgForm): void {\r\n    let submission = {channel: \"settings\", type: \"create_room\", title: <string> f.value[\"title\"]};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n\r\n  onToggleRoomPrivacy(): void {\r\n    let submission = {channel: \"settings\", type: \"set_room_privacy\", room_id: sessionStorage.getItem(\"room_id\"), private: !this.roomPrivate};\r\n    this.socketService.sendMessage(submission);\r\n  }\r\n}\r\n  ","<div class=\"scroll-container\">\r\n    <app-panel-header [header]=\"header\"></app-panel-header>\r\n    <div class=\"list\">\r\n        <div class=\"margin\">\r\n            <div id=\"profile-settings\">\r\n                <h2>Profile</h2>\r\n                <h3>Update Display Name</h3>\r\n                <form class=\"form\" #i=\"ngForm\" (ngSubmit)=\"onSubmitDisplayName(i)\" novalidate>\r\n                    <div class=\"form-element\">\r\n                        <input type=\"text\" placeholder=\"{{ displayName }}\" name=\"display_name\" ngModel required>\r\n                    </div>\r\n                    <div class=\"form-element\">\r\n                        <button type=\"submit\">Save</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div id=\"room-settings\" class=\"hidden\">\r\n                <h2 id=\"room-title\">{{ roomTitle }}</h2>\r\n                <form class=\"privacy-form form hidden\">\r\n                    <div>\r\n                        <p class=\"form-label\">{{ roomTitle }} is currently public. Anyone with the link or room code\r\n                        can join this room.</p>\r\n                    </div>\r\n                    <div class=\"form-element\">\r\n                        <button (click)=\"onToggleRoomPrivacy()\" type=\"submit\">Make private</button>\r\n                    </div>\r\n                </form>\r\n                <form class=\"privacy-form form\">\r\n                    <div>\r\n                        <p class=\"form-label\">{{ roomTitle }} is currently private. No one can join this room without an invitation.</p>\r\n                    </div>\r\n                    <div class=\"form-element\">\r\n                        <button (click)=\"onToggleRoomPrivacy()\" type=\"submit\">Make public</button>\r\n                    </div>\r\n                </form>\r\n                <h3 class=\"form privacy-form hidden\">Share an invite link for {{ roomTitle }}</h3>\r\n                <form class=\"form privacy-form hidden\">\r\n                    <div class=\"form-element\">\r\n                        <input readonly value=\"cowork.ac/j/{{ roomId }}\"/>\r\n                    </div>\r\n                    <div class=\"form-element\">\r\n                        <button [cdkCopyToClipboard]=\"roomLink\" type=\"submit\">Copy</button>\r\n                    </div>\r\n                </form>\r\n                <h3>Invite Another User to {{ roomTitle }}</h3>\r\n                <form class=\"form\" #i=\"ngForm\" (ngSubmit)=\"onSubmitInvite(i)\" novalidate>\r\n                    <div class=\"form-element\">\r\n                        <input type=\"text\" placeholder=\"Email address\" name=\"username\" ngModel required>\r\n                    </div>\r\n                    <div class=\"form-element\">\r\n                        <button type=\"submit\">Invite</button>\r\n                    </div>\r\n                </form>\r\n                <h3>Leave {{ roomTitle }}</h3>\r\n                <form class=\"form\" novalidate>\r\n                    <div class=\"form-element\">\r\n                        <div class=\"form-label\">Leave {{ roomTitle }}?</div>\r\n                    </div>\r\n                    <div class=\"form-element\">\r\n                        <button (click)=\"onSubmitLeave()\">Leave</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            <div id=\"enter-room\" class=\"hidden\">\r\n                <h2>Enter Another Room</h2>\r\n                <ng-template appRoomLink></ng-template>\r\n            </div>\r\n            <h2>Join a Room</h2>\r\n            <h3>Pending Invitations</h3>\r\n            <p>You don't have any invitations.</p>\r\n            <div id=\"invitations\" class=\"hidden\">\r\n                <ng-template appRoomInvitation></ng-template>\r\n            </div>\r\n            <h3>Join a Public Room</h3>\r\n            <form class=\"form\" #j=\"ngForm\" (ngSubmit)=\"onSubmitJoin(j)\" novalidate>\r\n                <div class=\"form-element\">\r\n                    <input type=\"text\" placeholder=\"Room code\" name=\"joinCode\" ngModel required>\r\n                </div>\r\n                <div class=\"form-element\">\r\n                    <button type=\"submit\">Join</button>\r\n                </div>\r\n            </form>\r\n            <h2>Make a Room</h2>\r\n            <form class=\"form\" #c=\"ngForm\" (ngSubmit)=\"onSubmitCreate(c)\" novalidate>\r\n                <div class=\"form-element\">\r\n                    <input type=\"text\" placeholder=\"Room name\" name=\"title\" ngModel required>\r\n                </div>\r\n                <div class=\"form-element\">\r\n                    <button type=\"submit\">Create</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-loading-monetization',\r\n  templateUrl: './loading-monetization.component.html',\r\n  styleUrls: ['./loading-monetization.component.css']\r\n})\r\nexport class LoadingMonetizationComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>loading-monetization works!</p>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-monetized',\r\n  templateUrl: './monetized.component.html',\r\n  styleUrls: ['./monetized.component.css']\r\n})\r\nexport class MonetizedComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>monetized works!</p>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-not-monetized',\r\n  templateUrl: './not-monetized.component.html',\r\n  styleUrls: ['./not-monetized.component.css']\r\n})\r\nexport class NotMonetizedComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<p>not-monetized works!</p>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { WebMonetizationService } from 'src/app/web-monetization/web-monetization.service';\r\nimport { Activity } from '../activity';\r\n\r\n@Component({\r\n  selector: 'app-stats',\r\n  templateUrl: './stats.component.html',\r\n  styleUrls: ['./stats.component.css']\r\n})\r\nexport class StatsComponent implements OnInit, Activity {\r\n  header: string = \"Stats\";\r\n\r\n  webMonetizationService: WebMonetizationService;\r\n\r\n  constructor(webMonetizationService: WebMonetizationService) {\r\n    this.webMonetizationService = webMonetizationService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.webMonetizationService.monetization.subscribe((state: string) => {\r\n      this.handleState(state);\r\n    });\r\n  }\r\n\r\n  handleState(state: String) {\r\n    let current: HTMLElement = (document.getElementsByClassName(\"current-state\")[0] as HTMLElement);\r\n    current.classList.remove(\"current-state\");\r\n    if (state == \"pending\") {\r\n      let loading: HTMLElement = (document.getElementsByTagName(\"app-loading-monetization\")[0] as HTMLElement);\r\n      current = loading;\r\n    }\r\n    else if (state == \"started\") {\r\n      let monetized: HTMLElement = (document.getElementsByTagName(\"app-monetized\")[0] as HTMLElement);\r\n      current = monetized;\r\n    }\r\n    else {\r\n      // state is stopped or error state\r\n      let notMonetized: HTMLElement = (document.getElementsByTagName(\"app-not-monetized\")[0] as HTMLElement);\r\n      current = notMonetized;\r\n    }\r\n    current.classList.add(\"current-state\");\r\n  }\r\n\r\n}\r\n","<app-panel-header [header]=\"header\"></app-panel-header>\r\n<!--Why didn't I pad all of these like this? Need serious refactoring-->\r\n<div class=\"container\">\r\n    <app-not-monetized class=\"current-state\"></app-not-monetized>\r\n    <app-loading-monetization></app-loading-monetization>\r\n    <app-monetized></app-monetized>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Activity } from '../activity';\r\n\r\n@Component({\r\n  selector: 'app-store',\r\n  templateUrl: './store.component.html',\r\n  styleUrls: ['./store.component.css']\r\n})\r\nexport class StoreComponent implements OnInit, Activity {\r\n  header: string = \"Store\";\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<app-panel-header [header]=\"header\"></app-panel-header>\r\n<p>store works!</p>\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TasksService {\r\n\r\n  socketService: SocketService;\r\n\r\n  activeTaskSource: Subject<any>;\r\n  public activeTask: Observable<any>;\r\n\r\n  activeTaskId: string;\r\n\r\n  constructor(socketService: SocketService) {\r\n    this.socketService = socketService;\r\n    this.activeTaskSource = new Subject<any>();\r\n    this.activeTask = this.activeTaskSource.asObservable();\r\n  }\r\n\r\n  setActiveTask(data: any) {\r\n    let id: string = data.task_id;\r\n\r\n    this.activeTaskSource.next(data);\r\n\r\n    this.activeTaskId = id;\r\n  }\r\n}\r\n","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appList]'\r\n})\r\nexport class ListDirective {\r\n\r\n  public viewContainerRef: ViewContainerRef\r\n\r\n  constructor(viewContainerRef: ViewContainerRef) {\r\n    this.viewContainerRef = viewContainerRef\r\n  }\r\n\r\n}\r\n","import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[appFilterPopup]'\n})\nexport class FilterPopupDirective {\n\n  public viewContainerRef: ViewContainerRef;\n\n  constructor(viewContainerRef: ViewContainerRef) {\n    this.viewContainerRef = viewContainerRef\n  }\n}\n","import { Component, ComponentFactoryResolver, ComponentRef, OnInit, ViewChild } from '@angular/core';\nimport { SocketService } from 'src/app/socket/socket.service';\nimport { TagDirective } from './tag.directive';\nimport { TagComponent } from './tag/tag.component';\n\n@Component({\n  selector: 'app-filter-popup',\n  templateUrl: './filter-popup.component.html',\n  styleUrls: ['./filter-popup.component.css']\n})\nexport class FilterPopupComponent implements OnInit {\n\n  socketService: SocketService;\n  @ViewChild(TagDirective, { static: true }) public tagHost: TagDirective;\n  \n  componentFactoryResolver: ComponentFactoryResolver;\n\n  constructor(socketService: SocketService, componentFactoryResolver: ComponentFactoryResolver) {\n    this.componentFactoryResolver = componentFactoryResolver;\n    this.socketService = socketService;\n  }\n\n  ngOnInit(): void {\n    this.socketService.channelReply.get(\"tasks\").subscribe(msg => this.onResponseReceived(msg));\n    this.socketService.sendMessage({channel: \"tasks\", type: \"request_tags\"});\n  }\n\n  onResponseReceived(msg: any): void {\n    if (msg[\"channel\"] == \"tasks\") {\n      if (msg[\"type\"] == \"request_tags\") {\n        this.onRequestTags(msg);\n      }\n      else if (msg[\"type\"] == \"add_tag\") {\n        this.onAddTag(msg);\n      }\n    }\n  }\n\n  onRequestTags(msg: any): void {\n    for (let tag of msg[\"tags\"]) this.loadTag(tag);\n  }\n\n  onAddTag(msg: any): void {\n    this.loadTag(msg);\n  }\n\n  async loadTag(data: any): Promise<void> {\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(TagComponent);\n\n    const viewContainerRef = this.tagHost.viewContainerRef;\n\n    let componentRef: ComponentRef<TagComponent>;\n\n    componentRef = viewContainerRef.createComponent(componentFactory, data.index);\n\n    let instance: TagComponent = <TagComponent>componentRef.instance;\n    instance.data = data;\n    //this.tagViewRefs.set(data.task_id, componentRef.hostView);\n  }\n\n  addTag(): void {\n    let titleField: HTMLInputElement = document.getElementById(\"new-tag-title-field\") as HTMLInputElement;\n    let title: string = titleField.value;\n    let min = Math.ceil(0);\n    let max = Math.floor(4);\n    let color: number = Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive    \n    this.socketService.sendMessage({channel: \"tasks\", type: \"add_tag\", color: color, title: title});\n  }\n\n}\n","<div class=\"popup\">\n    <div class=\"popup-header\"><h3>Filter</h3></div>\n    <span>Available tags:</span>\n    <div class=\"drop-area\">\n        <ng-template appTag></ng-template>\n    </div>\n    <div class=\"new-tag\">\n        <input class=\"title\" id=\"new-tag-title-field\" type=\"text\" placeholder=\"Add a new tag...\" (keydown.enter)=\"addTag()\"/>\n    </div>\n</div>","import { Directive, ViewContainerRef } from '@angular/core';\n\n@Directive({\n  selector: '[appTag]'\n})\nexport class TagDirective {\n\n  public viewContainerRef: ViewContainerRef\n\n  constructor(viewContainerRef: ViewContainerRef) {\n    this.viewContainerRef = viewContainerRef\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-tag',\n  templateUrl: './tag.component.html',\n  styleUrls: ['./tag.component.css']\n})\nexport class TagComponent implements OnInit {\n\n  data: any;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    \n  }\n\n}\n","<div class=\"tag\" cdkDrag>\n    <span>{{ this.data.title }}</span>\n</div>","import { Component, OnInit, Input, ComponentFactoryResolver, ViewChild, ViewChildren, QueryList, ViewContainerRef, ViewRef, ComponentRef } from '@angular/core';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { TaskDirective } from './task.directive';\r\nimport { TaskComponent } from './task/task.component';\r\nimport { CdkDragDrop, CdkDragStart } from '@angular/cdk/drag-drop';\r\nimport { ListsService } from '../lists.service';\r\nimport { FilterPopupComponent } from './filter-popup/filter-popup.component';\r\nimport { FilterPopupDirective } from './filter-popup.directive';\r\n\r\n@Component({\r\n  selector: 'app-list',\r\n  templateUrl: './list.component.html',\r\n  styleUrls: ['./list.component.css']\r\n})\r\nexport class ListComponent implements OnInit {\r\n\r\n  @ViewChild(TaskDirective, {static: true}) public taskHost: TaskDirective;\r\n  @ViewChild(FilterPopupDirective, { static: true }) public filterPopupHost: FilterPopupDirective;\r\n\r\n\r\n  @Input() data: any;\r\n\r\n  @Input() lists: string[];\r\n\r\n  public disabled: boolean = false;\r\n\r\n  filterPopupOpen: boolean = false;\r\n\r\n  // string problems. passing by reference. should be passing by value. might need two arrays.\r\n  public tasks: Map<string, TaskComponent> = new Map<string, TaskComponent>();\r\n\r\n  taskViewRefs: Map<string, ViewRef> = new Map<string, ViewRef>();\r\n\r\n  socketService: SocketService;\r\n  listsService: ListsService;\r\n  componentFactoryResolver: ComponentFactoryResolver;\r\n\r\n  constructor(socketService: SocketService, listsService: ListsService, componentFactoryResolver: ComponentFactoryResolver) {\r\n    this.socketService = socketService;\r\n    this.listsService = listsService;\r\n    this.componentFactoryResolver = componentFactoryResolver;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n    this.socketService.sendMessage({channel: \"tasks\", type: \"request_tasks_for_list\", \"list_id\": this.data.list_id, \"index\": 0});\r\n    this.listsService.lists[this.data.list_id] = this;\r\n  }\r\n\r\n  dropTask(event: CdkDragDrop<string[]>): void {\r\n    if (event.previousContainer === event.container) {\r\n      if (!(event.currentIndex == event.previousIndex)) {\r\n        this.taskHost.viewContainerRef.move(this.taskHost.viewContainerRef.get(event.previousIndex), event.currentIndex);\r\n        let taskId: string = event.item.data.task_id;\r\n        let data: any = this.listsService.lists.get(event.previousContainer.id).tasks.get(taskId).data;\r\n        this.socketService.sendMessage({channel: \"tasks\", type: \"edit_listing\", listing_id: data.listing_id, list_id: event.container.id, index: event.currentIndex});\r\n        return\r\n      }\r\n    } else {\r\n      event.previousContainer.removeItem(event.item);\r\n      let taskId: string = event.item.data.task_id;\r\n      let data: any = this.listsService.lists.get(event.previousContainer.id).tasks.get(taskId).data;\r\n      this.tasks.set(taskId, this.listsService.lists.get(event.previousContainer.id).tasks.get(taskId));\r\n      this.listsService.lists.get(event.previousContainer.id).tasks.delete(taskId);\r\n      data.index = event.currentIndex;\r\n      let previousViewContainerRef: ViewContainerRef = this.listsService.lists.get(event.previousContainer.id).taskHost.viewContainerRef;\r\n      previousViewContainerRef.remove(event.previousIndex);\r\n      this.loadTask(data);\r\n      this.socketService.sendMessage({channel: \"tasks\", type: \"edit_listing\", listing_id: data.listing_id, list_id: event.container.id, index: event.currentIndex});\r\n    }\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    if (msg[\"channel\"] == \"tasks\") {\r\n      if (msg[\"type\"] == \"request_tasks_for_list\") {\r\n        this.onRequestTasksForList(msg);\r\n      }\r\n      else if (msg[\"type\"] == \"add_task\") {\r\n        this.onAddTask(msg);\r\n      }\r\n      else if (msg[\"type\"] == \"request_task\") {\r\n        this.checkDisable();\r\n      }\r\n      else if (msg[\"type\"] == \"delete_task\") {\r\n        this.onDeleteTask(msg[\"task_id\"]);\r\n      }\r\n    }\r\n  }\r\n\r\n  toggleTags() {\r\n    // request tags? or should have already requested them (probably)\r\n    // make them display: flex or display: none depending on whether\r\n    // they are already visible\r\n    if (!this.filterPopupOpen) this.openFilterPopup();\r\n    else this.closeFilterPopup();\r\n  }\r\n\r\n  openFilterPopup() {\r\n    const viewContainerRef = this.filterPopupHost.viewContainerRef;\r\n    viewContainerRef.clear();\r\n\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(FilterPopupComponent);\r\n\r\n    let componentRef: ComponentRef<FilterPopupComponent>;\r\n\r\n    componentRef = viewContainerRef.createComponent(componentFactory);\r\n\r\n    let instance: FilterPopupComponent = <FilterPopupComponent>componentRef.instance;\r\n    this.filterPopupOpen = true;\r\n  }\r\n\r\n  closeFilterPopup() {\r\n    const viewContainerRef = this.filterPopupHost.viewContainerRef;\r\n    viewContainerRef.clear();\r\n    this.filterPopupOpen = false;\r\n  }\r\n\r\n  checkDisable() {\r\n    this.disabled = this.listsService.disabledLists.has(this.data.list_id);\r\n  }\r\n\r\n  onRequestTasksForList(msg: any): void {\r\n    let initialTasksSize = this.tasks.size;\r\n    msg[\"tasks\"].sort(function(a: any, b: any) {\r\n      return a.index - b.index;\r\n    });\r\n    msg[\"tasks\"].forEach(data => {\r\n      if (data[\"list_id\"] == this.data.list_id) {\r\n        this.loadTask(data);\r\n      }\r\n    });\r\n    if (this.tasks.size > initialTasksSize) {\r\n      this.socketService.sendMessage({channel: \"tasks\", type: \"request_tasks_for_list\", \"list_id\": this.data.list_id, \"index\": this.tasks.size});\r\n    }\r\n  }\r\n  \r\n  onAddTask(msg: any): void {\r\n    if (msg[\"list_id\"] == this.data.list_id) {\r\n      this.loadTask(msg);\r\n    }\r\n  }\r\n\r\n  onDeleteTask(taskId: string) {\r\n    if (this.tasks.has(taskId)) {\r\n      let index: number = this.taskHost.viewContainerRef.indexOf(this.taskViewRefs.get(taskId));\r\n      this.taskHost.viewContainerRef.remove(index);\r\n    }\r\n  }\r\n\r\n  async loadTask(data: any): Promise<void> {\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(TaskComponent);\r\n\r\n    const viewContainerRef = this.taskHost.viewContainerRef;\r\n\r\n    let componentRef: ComponentRef<TaskComponent>;\r\n\r\n    componentRef = viewContainerRef.createComponent(componentFactory, data.index);\r\n\r\n    let instance: TaskComponent = <TaskComponent>componentRef.instance;\r\n    instance.data = data;\r\n    instance.isListing = true;\r\n    this.tasks.set(data.task_id, instance);\r\n    this.taskViewRefs.set(data.task_id, componentRef.hostView);\r\n  }\r\n\r\n  addTask(): void {\r\n    let newTaskTitleField: HTMLInputElement = <HTMLInputElement> document.getElementById(this.data.list_id  + \"-new-task-title-field\");\r\n    let title: string = newTaskTitleField.value;\r\n    this.socketService.sendMessage({channel: \"tasks\", type: \"add_task\", public: true, active: false, title: title, contents: \"\", list_id: this.data.list_id, index: 0});\r\n    newTaskTitleField.value = \"\";\r\n  }\r\n\r\n  deleteList(): void {\r\n    this.socketService.sendMessage({channel: \"tasks\", type: \"delete_list\", list_id: this.data.list_id});\r\n    this.listsService.lists.delete(this.data.list_id);\r\n  }\r\n\r\n  editTitle(): void {\r\n    let titleField: HTMLInputElement = <HTMLInputElement> document.getElementById(this.data.list_id  + \"-title-field\");\r\n    let title: string = titleField.value;\r\n    titleField.blur();\r\n    this.socketService.sendMessage({channel: \"tasks\", type: \"edit_list_title\", list_id: this.data.list_id, title: title});\r\n  }\r\n\r\n  startDragging(event: CdkDragStart<string[]>): void {\r\n    event.source.data = this.data;\r\n  }\r\n\r\n}\r\n","<div class=\"list\">\r\n    <div class=\"tasks\">\r\n        <div class=\"new-task\">\r\n            <input class=\"title\" id=\"{{ data.list_id }}-new-task-title-field\" type=\"text\" placeholder=\"Add a new task...\" (keydown.enter)=\"addTask()\"/>\r\n            <a class=\"filter\" (click)=\"toggleTags()\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-filter\" viewBox=\"0 0 16 16\">\r\n                    <path d=\"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z\"/>\r\n                </svg>\r\n            </a>\r\n        </div>\r\n        <ng-template appFilterPopup></ng-template>\r\n        <div class=\"drop-area\" id=\"{{ data.list_id }}\" cdkDropList [cdkDropListConnectedTo]=\"lists\" (cdkDropListDropped)=\"dropTask($event)\">\r\n            <ng-template appTask></ng-template>\r\n        </div>\r\n    </div>\r\n</div>","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appTask]'\r\n})\r\nexport class TaskDirective {\r\n\r\n  public viewContainerRef: ViewContainerRef\r\n\r\n  constructor(viewContainerRef: ViewContainerRef) {\r\n    this.viewContainerRef = viewContainerRef\r\n  }\r\n\r\n}\r\n","import { Component, OnInit, Input, AfterViewInit, ComponentFactoryResolver } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { CdkDragStart } from '@angular/cdk/drag-drop';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { ListsService } from '../../lists.service';\r\nimport { TasksService } from '../../../tasks.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-task',\r\n  templateUrl: './task.component.html',\r\n  styleUrls: ['./task.component.css']\r\n})\r\nexport class TaskComponent implements OnInit {\r\n\r\n  @Input() data: any;\r\n  @Input() isListing: boolean;\r\n\r\n\r\n  socketService: SocketService;\r\n  listsService: ListsService;\r\n  tasksService: TasksService;\r\n\r\n  componentFactoryResolver: ComponentFactoryResolver;\r\n\r\n  location: Location;\r\n\r\n  constructor(socketService: SocketService, listsService: ListsService, tasksService: TasksService, location: Location) {\r\n    this.socketService = socketService;\r\n    this.listsService = listsService;\r\n    this.tasksService = tasksService;\r\n    this.location = location;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    if (msg[\"channel\"] == \"tasks\") {\r\n      if (msg[\"type\"] == \"request_task\") {\r\n        this.onRequestTask(msg);\r\n      }\r\n      if (msg[\"type\"] == \"set_listing_active\") {\r\n        if (msg[\"listing_id\"] == this.data.listing_id) this.data.active = msg[\"active\"];\r\n        else this.data.active = false;\r\n      }\r\n      if (msg[\"type\"] == \"set_task_public\") {\r\n        if (msg[\"task_id\"] == this.data.task_id) this.data.public = msg[\"public\"];\r\n      }\r\n    }\r\n  }\r\n\r\n  startDragging(event: CdkDragStart<string[]>): void {\r\n    event.source.data = this.data;\r\n  }\r\n\r\n  openTask(event: Event): void {\r\n    event.preventDefault();\r\n    if (!(this.data.task_id == undefined)) this.location.replaceState('/home/tasks/' + this.data.task_id);\r\n  }\r\n\r\n  removeTask() {\r\n    this.socketService.sendMessage({ channel: \"tasks\", type: \"delete_task\", \"task_id\": this.data.task_id });\r\n  }\r\n\r\n  onRequestTask(msg: any) {\r\n    if (msg[\"task_id\"] == this.data.task_id) {\r\n      this.data = msg;\r\n    }\r\n  }\r\n}","<a href=\"/home/tasks/{{ data.task_id }}\" draggable=\"false\" (click)=\"openTask($event)\" (keydown.enter)=\"openTask($event)\" tabindex=\"0\"\r\n  [ngClass]=\"isListing ? 'listing' : 'task'\" [class.active]=\"this.data.active && isListing\" [cdkDragDisabled]=\"!isListing\" id=\"{{ data.task_id }}\" (cdkDragStarted)=\"startDragging($event)\" cdkDrag>\r\n  <div class=\"center\">\r\n    <div class=\"tags\">\r\n      tags\r\n    </div>\r\n    <div *ngIf=\"isListing; then thenBlock else elseBlock\"></div>\r\n    <ng-template #thenBlock><div id=\"{{ data.task_id }}-title\" class=\"title\">{{ data.title || \"Untitled task\"}}</div></ng-template>\r\n    <ng-template #elseBlock><div id=\"{{ data.task_id }}-title\" class=\"title\">{{ data.title || \"This user is not currently sharing an active task.\"}}</div></ng-template>\r\n    <div id=\"{{ data.task_id }}-full\" class=\"full\">\r\n    </div>\r\n    <div class=\"extras\">\r\n      <div class=\"info\">extras</div>\r\n    </div>\r\n  </div>\r\n</a>","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { ListComponent } from './list/list.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ListsService {\r\n\r\n  public lists: Map<string, ListComponent> = new Map<string, ListComponent>();\r\n\r\n  public disabledLists: Map<string, number> = new Map<string, number>();\r\n\r\n  constructor() { }\r\n}\r\n","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appTaskEditorPopup]'\r\n})\r\nexport class TaskEditorPopupDirective {\r\n\r\n  public viewContainerRef: ViewContainerRef;\r\n\r\n  constructor(viewContainerRef: ViewContainerRef) {\r\n    this.viewContainerRef = viewContainerRef\r\n  }\r\n\r\n}","import { Component, OnInit } from '@angular/core';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\n\r\n@Component({\r\n  selector: 'app-task-editor-popup',\r\n  templateUrl: './task-editor-popup.component.html',\r\n  styleUrls: ['./task-editor-popup.component.css']\r\n})\r\nexport class TaskEditorPopupComponent implements OnInit {\r\n\r\n  data: any;\r\n  onClose: Function;\r\n\r\n  enteredTitle: string;\r\n  enteredDescription: string;\r\n\r\n  isEditingTitle: boolean = true;\r\n\r\n  socketService: SocketService;\r\n\r\n  constructor(socketService: SocketService) {\r\n    this.socketService = socketService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.enteredTitle = this.data.title || \"Untitled task\";\r\n    this.enteredDescription = this.data.contents;\r\n    let modalContent: HTMLElement = document.getElementsByClassName(\"modal-content\")[0] as HTMLElement;\r\n    modalContent.focus();\r\n  }\r\n\r\n  editTitle(): void {\r\n    let titleField: HTMLInputElement = document.getElementById(\"task-title-field\") as HTMLInputElement;\r\n    this.enteredTitle = this.data.title;\r\n    this.isEditingTitle = true;\r\n  }\r\n\r\n  saveTitle(): void {\r\n    let titleField: HTMLInputElement = document.getElementById(\"task-title-field\") as HTMLInputElement;\r\n    if (this.enteredTitle != undefined) {\r\n      if (titleField == document.activeElement) titleField.blur();\r\n  \r\n      this.data.title = this.enteredTitle;\r\n  \r\n      this.isEditingTitle = false;\r\n      this.socketService.sendMessage({ channel: \"tasks\", type: \"edit_task_title\", task_id: this.data.task_id, title: this.enteredTitle });\r\n    }\r\n  }\r\n\r\n  saveDescription(): void {\r\n    if (this.enteredDescription != undefined) {  \r\n      this.data.contents = this.enteredDescription;\r\n  \r\n      this.socketService.sendMessage({channel: \"tasks\", type: \"edit_task_contents\", task_id: this.data.task_id, contents: this.enteredDescription});\r\n    }\r\n  }\r\n\r\n  changeActive(): void {\r\n    this.socketService.sendMessage({channel: \"tasks\", type: \"set_listing_active\", listing_id: this.data.listing_id, active: !this.data.active});\r\n  }\r\n\r\n  changePublic(): void {\r\n    this.socketService.sendMessage({channel: \"tasks\", type: \"set_task_public\", task_id: this.data.task_id, public: !this.data.public});\r\n  }\r\n\r\n  removeTask(event: Event): void {\r\n    this.onClose(event);\r\n    this.socketService.sendMessage({channel: \"tasks\", type: \"delete_task\", task_id: this.data.task_id, title: this.enteredTitle});\r\n  }\r\n\r\n}\r\n","<div class=\"modal\" (click)=\"onClose($event)\">\r\n    <div class=\"modal-content\" tabindex=\"0\">\r\n        <div class=\"task-header\">\r\n            <textarea id=\"task-title-field\" (focus)=\"editTitle()\" (keydown.enter)=\"saveTitle()\" (blur)=\"saveTitle()\"\r\n                [(ngModel)]=\"enteredTitle\" [disabled]=\"!this.data.can_edit_title\">{{ data.title }}</textarea>\r\n            <a tabindex=\"0\" (keydown.enter)=\"onClose($event)\" (click)=\"onClose($event)\" class=\"close-task\">X</a>\r\n        </div>\r\n        <div class=\"task-content\">\r\n            <div class=\"task-main\">\r\n                <form (submit)=\"onClose($event)\">\r\n                    <div tabindex=\"0\" class=\"tooltip-parent\">\r\n                        <h3>Listing</h3>\r\n                        <span>A listing is your personal copy of a task. Shared versions of the task will not have this\r\n                            information.</span>\r\n                    </div>\r\n                    <p>This section will include time spent on this task, any ongoing timers, and tags.</p>\r\n                    <h3>Task</h3>\r\n                    <label for=\"event-details\">Description</label>\r\n                    <textarea id=\"event-details\" name=\"event-details\" rows=\"6\" style=\"resize: none;\"\r\n                        [(ngModel)]=\"enteredDescription\" (blur)=\"saveDescription()\"\r\n                        [disabled]=\"!this.data.can_edit_contents\">{{ data.description }}</textarea>\r\n\r\n                </form>\r\n            </div>\r\n            <div class=\"task-sidebar\">\r\n                <div [ngClass]=\"this.data.can_edit_settings ? 'settings' : 'hidden-settings'\">\r\n                    <h6 class=\"task-actions\">Task Settings</h6>\r\n                    <div class=\"toggle\">\r\n                        <span tabindex=\"0\" class=\"tooltip-parent\">Public<span>Set a task to public if you want it to be\r\n                                visible to others.</span></span>\r\n                        <label class=\"switch\">\r\n                            <input type=\"checkbox\" id=\"public\" (change)=\"changePublic()\" [checked]=\"this.data.public\">\r\n                            <span class=\"slider\"></span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n                <div [ngClass]=\"this.data.can_edit_settings ? 'settings' : 'hidden-settings'\">\r\n                    <h6 class=\"task-actions\">Listing Settings</h6>\r\n                    <div class=\"toggle\">\r\n                        <span tabindex=\"0\" class=\"tooltip-parent\">Active<span tabindex=\"0\">Set a listing to active if\r\n                                you want to work on it. You can have up to one active task at a time.</span></span>\r\n                        <label class=\"switch\">\r\n                            <input type=\"checkbox\" id=\"active\" (change)=\"changeActive()\" [checked]=\"this.data.active\">\r\n                            <span class=\"slider\"></span>\r\n                        </label>\r\n                    </div>\r\n                    <button class=\"remove-task\" tabindex=\"0\" (click)=\"removeTask($event)\"\r\n                        (keydown.enter)=\"removeTask($event)\">Remove</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { Component, OnInit, ViewChild, ComponentFactoryResolver, ViewRef, ComponentRef } from '@angular/core';\r\nimport { Location } from '@angular/common'\r\nimport { Activity } from '../activity';\r\nimport { ListDirective } from './list.directive';\r\nimport { ListComponent } from './list/list.component';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { ListsService } from './lists.service';\r\nimport { Handler } from 'src/app/handler';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { TaskEditorPopupDirective } from './task-editor-popup.directive';\r\nimport { TaskEditorPopupComponent } from './task-editor-popup/task-editor-popup.component';\r\nimport { MenuComponent } from '../../menu/menu.component';\r\n\r\n@Component({\r\n  selector: 'app-tasks',\r\n  templateUrl: './tasks.component.html',\r\n  styleUrls: ['./tasks.component.css']\r\n})\r\nexport class TasksComponent extends Handler implements OnInit, Activity {\r\n\r\n  @ViewChild(ListDirective, {static: true}) listHost: ListDirective;\r\n  @ViewChild(TaskEditorPopupDirective, { static: true }) public taskEditorPopupHost: TaskEditorPopupDirective;\r\n\r\n  header: string = \"Tasks\";\r\n\r\n  lists: string[] = [];\r\n  listViewRefs: Map<string, ViewRef> = new Map<string, ViewRef>();\r\n\r\n  scrollPosition: any;\r\n\r\n  socketService: SocketService;\r\n  listsService: ListsService;\r\n  componentFactoryResolver: ComponentFactoryResolver;\r\n\r\n  taskId: string;\r\n\r\n  route: ActivatedRoute;\r\n\r\n  location: Location;\r\n\r\n  constructor(socketService: SocketService, listsService: ListsService, componentFactoryResolver: ComponentFactoryResolver, route: ActivatedRoute, location: Location) {\r\n    super();\r\n    this.socketService = socketService;\r\n    this.listsService = listsService;\r\n    this.componentFactoryResolver = componentFactoryResolver;\r\n    this.location = location;\r\n    this.route = route;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (!this.socketService.channelIsRegistered(\"tasks\")) this.socketService.register(\"tasks\");\r\n    this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n    this.socketService.sendMessage({channel: \"tasks\", type: \"request_lists\"});\r\n\r\n    this.location.onUrlChange(this.handleTask.bind(this));\r\n    this.handleTask();\r\n  }\r\n\r\n  handleMouseDown(event: MouseEvent) {\r\n    let element: Element = document.getElementById(\"lists\");\r\n    this.scrollPosition = {\r\n        left: element.scrollLeft,\r\n        x: event.clientX,\r\n    };\r\n  }\r\n\r\n  handleMouseMovement(event: MouseEvent) {\r\n    if (this.scrollPosition != undefined) {\r\n      const dx = event.clientX - this.scrollPosition.x;\r\n      \r\n\r\n      let element: Element = document.getElementById(\"lists\");\r\n      this.scrollPosition = {\r\n        left: element.scrollLeft,\r\n        x: event.clientX,\r\n      };\r\n      element.scrollBy(-dx, 0);\r\n      if (window.getSelection) {\r\n        if (window.getSelection().empty) {\r\n          window.getSelection().empty();\r\n        }\r\n        else if (window.getSelection().removeAllRanges) {\r\n          window.getSelection().removeAllRanges();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleMouseUp(event: MouseEvent) {\r\n    this.scrollPosition = undefined;\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    if (msg[\"channel\"] == \"tasks\") {\r\n      if (msg[\"type\"] == \"request_lists\") {\r\n        this.onRequestLists(msg);\r\n      }\r\n      else if (msg[\"type\"] == \"request_task\") {\r\n        this.onRequestTask(msg);\r\n      }\r\n    }\r\n  }\r\n\r\n  onRequestLists(msg: any): void {\r\n    msg[\"lists\"].sort(function(a: any, b: any) {\r\n      return a.index - b.index;\r\n    });\r\n    msg[\"lists\"].forEach(data => {\r\n      console.log(data);\r\n      this.loadList(data);\r\n    });\r\n  }\r\n\r\n  loadList(data: any): void {\r\n    this.lists.push(data.list_id);\r\n    \r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(ListComponent);\r\n\r\n    const viewContainerRef = this.listHost.viewContainerRef;\r\n\r\n    let componentRef = viewContainerRef.createComponent(componentFactory, data.index);\r\n    let instance: ListComponent = <ListComponent>componentRef.instance\r\n    instance.data = data;\r\n    instance.lists = this.lists;\r\n    this.listsService.lists.set(data.list_id, instance);\r\n    this.listViewRefs.set(data.list_id, componentRef.hostView);\r\n  }\r\n\r\n  handleTask() {\r\n    if (MenuComponent.getActivity(this.location.path()) == \"tasks\" && this.location.path().split('/').length > 3) {\r\n      this.taskId = this.location.path().split('/')[3];\r\n      this.socketService.sendMessage({channel: \"tasks\", type: \"request_task\", \"task_id\": this.taskId});\r\n    }\r\n  }\r\n\r\n  onRequestTask(taskData: any) {\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(TaskEditorPopupComponent);\r\n\r\n    const viewContainerRef = this.taskEditorPopupHost.viewContainerRef;\r\n\r\n    let componentRef: ComponentRef<TaskEditorPopupComponent>;\r\n\r\n    componentRef = viewContainerRef.createComponent(componentFactory);\r\n\r\n    let instance: TaskEditorPopupComponent = <TaskEditorPopupComponent>componentRef.instance;\r\n    instance.data = taskData;\r\n    instance.onClose = this.closeTask.bind(this);\r\n  }\r\n\r\n  closeTask(event: Event) {\r\n    if ((event.target as HTMLElement).classList.contains(\"modal\") ||\r\n      (event.target as HTMLElement).classList.contains(\"close-task\") ||\r\n      (event.target as HTMLElement).classList.contains(\"remove-task\")) {\r\n      const viewContainerRef = this.taskEditorPopupHost.viewContainerRef;\r\n      viewContainerRef.clear();\r\n      this.location.replaceState('/home/tasks');\r\n    }\r\n  }\r\n}\r\n","<ng-template appTaskEditorPopup></ng-template>\r\n<div class=\"scroll-container\">\r\n    <app-panel-header [header]=\"header\"></app-panel-header>\r\n    <div id=\"list\">\r\n        <div>\r\n            <ng-template appList></ng-template>\r\n        </div>\r\n    </div>\r\n</div>","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject, timer } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TimerService {\r\n\r\n  public timerSource: Observable<number>;\r\n\r\n  constructor() { }\r\n\r\n  startTimer(): void {\r\n    this.timerSource = timer(1000, 1000);\r\n  }\r\n\r\n  stopTimer(): void {\r\n    this.timerSource = null;\r\n  }\r\n}","import { Component, OnInit } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { Handler } from 'src/app/handler';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { RoomChangeService } from '../../room-change.service';\r\nimport { Activity } from '../activity';\r\nimport { TasksService } from '../tasks.service';\r\nimport { TimerService } from '../timer.service';\r\n\r\n@Component({\r\n  selector: 'app-timer',\r\n  templateUrl: './timer.component.html',\r\n  styleUrls: ['./timer.component.css']\r\n})\r\nexport class TimerComponent extends Handler implements OnInit, Activity {\r\n  header: string = \"Timer\";\r\n\r\n  tabs: Array<string> = [\"host\"];\r\n\r\n  socketService: SocketService;\r\n\r\n  roomChangeService: RoomChangeService;\r\n\r\n  roomId: string;\r\n\r\n  tasksService: TasksService;\r\n  activeTaskData: any = {\"task_id\": null, \"title\": \"You need an active task to participate. Select one from the tasks tab.\"};\r\n  activeTask: boolean = false;\r\n\r\n  timerService: TimerService;\r\n  timeRemaining: Date;\r\n  timerSubscription: Subscription;\r\n\r\n  timeToSubmit: number = 25;\r\n  sessionId: string;\r\n  participants: any;\r\n  \r\n  joinedSession: boolean = false;\r\n\r\n  rightVisibility: string = \"inherit\";\r\n  leftVisibility: string = \"inherit\";\r\n\r\n  startButtonDisplay: string = \"inherit\";\r\n  joinButtonDisplay: string = \"none\";\r\n  leaveButtonDisplay: string = \"none\";\r\n\r\n  participantsDisplay: string = \"none\";\r\n\r\n  constructor(socketService: SocketService, roomChangeService: RoomChangeService, tasksService: TasksService, timerService: TimerService) {\r\n    super();\r\n    this.socketService = socketService;\r\n    this.roomChangeService = roomChangeService;\r\n    this.tasksService = tasksService;\r\n    this.timerService = timerService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (!this.socketService.channelIsRegistered(\"timer\")) this.socketService.register(\"timer\");\r\n    this.socketService.channelReply.get(\"timer\").subscribe(msg => {\r\n      this[this.snakeToCamel(msg[\"type\"])](msg);\r\n    });\r\n    this.roomChangeService.roomId.subscribe(roomId => this.changeRoom(roomId));\r\n    this.tasksService.activeTask.subscribe(data => { this.activeTaskData = data; this.activeTask = true});\r\n    this.timeRemaining = new Date(0, 0, 0, 0, this.timeToSubmit);\r\n  }\r\n\r\n  changeRoom(roomId: string): void {\r\n    this.roomId = roomId;\r\n  }\r\n\r\n  addTime(event: Event, time: number): void {\r\n    this.timeToSubmit += time;\r\n    this.rightVisibility = \"inherit\";\r\n    this.leftVisibility = \"inherit\";\r\n    if (this.timeToSubmit > 45 || this.timeToSubmit < 10) this.timeToSubmit -= time;\r\n    if (this.timeToSubmit == 45) {\r\n      this.rightVisibility = \"hidden\";\r\n    }\r\n    else if (this.timeToSubmit == 10) {\r\n      this.leftVisibility = \"hidden\";\r\n    }\r\n    this.timeRemaining.setMinutes(this.timeToSubmit);\r\n    this.timeRemaining = new Date(0, 0, 0, 0, this.timeToSubmit);\r\n  }\r\n\r\n  // start a session (from the server)\r\n  // remember this can come from anyone!\r\n  startSession(msg: any): void {\r\n    this.sessionId = msg[\"session_id\"];\r\n    this.timeRemaining = new Date(0, 0, 0, 0, msg[\"duration\"], 0);\r\n    this.timerService.startTimer();\r\n    if (this.timerSubscription != null) this.timerSubscription.unsubscribe();\r\n    this.timerSubscription = this.timerService.timerSource.subscribe(second => this.countdown());\r\n\r\n    this.leftVisibility = \"hidden\";\r\n    this.rightVisibility = \"hidden\";\r\n    this.startButtonDisplay = \"none\";\r\n    this.joinButtonDisplay = \"none\";\r\n\r\n    this.participants = msg[\"participants\"];\r\n\r\n    // reveal leave session button, participants\r\n    // TODO: the below could absolutely cause glitches if two people choose the same display name\r\n    if (this.participants.includes(sessionStorage.getItem(\"display_name\"))) this.leaveButtonDisplay = \"inherit\";\r\n\r\n    this.participantsDisplay = \"initial\";\r\n\r\n\r\n  }\r\n\r\n  joinSession(msg: any): void {\r\n    \r\n  }\r\n\r\n  leaveSession(msg: any): void {\r\n    if (msg[\"success\"] == true) {\r\n      this.sessionId = msg[\"session_id\"];\r\n\r\n      this.joinButtonDisplay = \"inherit\";\r\n      this.leaveButtonDisplay = \"none\";\r\n    }\r\n  }\r\n\r\n  // TODO END SESSION\r\n  endSession(msg: any) {\r\n\r\n  }\r\n\r\n  start(): void {\r\n    this.socketService.sendMessage({channel: \"timer\", type: \"start_session\", room_id: this.roomId, consumable: 0, duration: this.timeToSubmit, is_break: false});\r\n  }\r\n\r\n  join(): void {\r\n\r\n  }\r\n\r\n  leave(): void {\r\n    this.socketService.sendMessage({channel: \"timer\", type: \"leave_session\", room_id: this.roomId, session_id: this.sessionId});\r\n  }\r\n\r\n  countdown(): void {\r\n    let newDate = new Date(0, 0, 0, 0, this.timeRemaining.getMinutes(), 0);\r\n    if (this.timeRemaining.getSeconds() == 0) {\r\n      if (this.timeRemaining.getMinutes() == 0) {\r\n        this.socketService.sendMessage({channel: \"timer\", type: \"leave_session\", room_id: this.roomId, consumable: 0, duration: 25, is_break: false});\r\n        this.timeRemaining = new Date(0, 0, 0, 0, this.timeToSubmit);\r\n        this.timerService.stopTimer();\r\n        this.timerSubscription.unsubscribe();\r\n        this.leftVisibility = \"inherit\";\r\n        this.rightVisibility = \"inherit\";\r\n      }\r\n      else {\r\n        newDate.setSeconds(59);\r\n        newDate.setMinutes(this.timeRemaining.getMinutes() - 1);\r\n      }\r\n    }\r\n    else {\r\n      newDate.setSeconds(this.timeRemaining.getSeconds() - 1);\r\n    }\r\n    this.timeRemaining = newDate;\r\n  }\r\n\r\n}\r\n","<app-panel-header [header]=\"header\"></app-panel-header>\r\n\r\n<div id=\"not-in-session\">\r\n    <div id=\"host\">\r\n        <div id=\"consumable\">🕯️</div>\r\n        <h2 [ngStyle]=\"{ 'display': this.participantsDisplay }\">Participants:</h2>\r\n        <p id=\"participants\" *ngFor=\"let participant of participants; let isLast=last\" [ngStyle]=\"{ 'display': this.participantsDisplay }\">{{ participant }}{{ isLast ? '' : ', ' }}</p>\r\n        <h2>Active task:</h2>\r\n        <app-task [data]=\"this.activeTaskData\"></app-task>\r\n        <div id=\"time\">\r\n            <a tabindex=\"0\" id=\"left-arrow\" class=\"arrow\" [ngStyle]=\"{ 'visibility': this.leftVisibility }\" (click)=\"addTime($event, -5)\" (keydown.enter)=\"addTime($event, -5)\"><</a>\r\n            <div id=\"time-display\">{{ this.timeRemaining | date:'mm:ss'}}</div>\r\n            <a tabindex=\"0\" id=\"right-arrow\" class=\"arrow\" [ngStyle]=\"{ 'visibility': this.rightVisibility }\" (click)=\"addTime($event, 5)\" (keydown.enter)=\"addTime($event, 5)\">></a>\r\n        </div>\r\n        <div id=\"start\">\r\n            <button id=\"start-button\" [ngStyle]=\"{ 'display': this.startButtonDisplay }\" (click)=\"start()\">Start</button>\r\n            <button id=\"join-button\" [ngStyle]=\"{ 'display': this.joinButtonDisplay }\" (click)=\"join()\">Join</button>\r\n            <button id=\"leave-button\" [ngStyle]=\"{ 'display': this.leaveButtonDisplay }\" (click)=\"leave()\">Leave</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id=\"in-session\">\r\n\r\n</div>","import { Component, OnInit, Input, Output } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { activities } from './activities/activities';\r\nimport { MenuComponent } from './menu/menu.component';\r\n\r\n@Component({\r\n  selector: 'app-activity-container',\r\n  templateUrl: './activity-container.component.html',\r\n  styleUrls: ['./activity-container.component.css']\r\n})\r\nexport class ActivityContainerComponent implements OnInit {\r\n  location: Location;\r\n  activities: Array<string> = activities;\r\n\r\n  constructor(location: Location) {\r\n    this.location = location;\r\n    this.updateActivity.bind(this);\r\n    this.location.onUrlChange(this.updateActivity);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.updateActivity(this.location.path(), this.location.getState());\r\n  }\r\n\r\n  updateActivity(url: string, state: unknown): void {\r\n    // ALERT: REDUNDANCY\r\n    let activity: string = MenuComponent.getActivity(url);\r\n    let visibleActivities: HTMLCollection = document.getElementsByClassName(\"visible\");\r\n    let i: number = 0;\r\n    for (let i: number = 0; i < visibleActivities.length; i++) {\r\n      let visibleActivity: Element = document.getElementsByClassName(\"visible\")[i];\r\n      visibleActivity.classList.remove(\"visible\");\r\n    }\r\n    if (activities.includes(activity)) {\r\n      let newVisibleActivity: Element = document.getElementById(activity);\r\n      newVisibleActivity.classList.add(\"visible\");\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"activities\">\r\n    <app-store class=\"activity\" id=\"store\"></app-store>\r\n    <app-chat class=\"activity\" id=\"chat\"></app-chat>\r\n    <app-timer class=\"activity\" id=\"timer\"></app-timer>\r\n    <app-stats class=\"activity\" id=\"stats\"></app-stats>\r\n    <app-tasks class=\"activity\" id=\"tasks\"></app-tasks>\r\n    <app-settings class=\"activity\" id=\"settings\"></app-settings>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { SocketService } from '../../socket/socket.service';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.css']\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n\r\n  socketService: SocketService;\r\n\r\n  constructor(socketService: SocketService) {\r\n    this.socketService = socketService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.socketService.reply.subscribe(msg => this.onResponseReceived(msg));\r\n  }\r\n\r\n  onResponseReceived(msg: any): void {\r\n    if (msg[\"password_correct\"] != null) {\r\n      if (msg[\"password_correct\"] == false) {\r\n        document.location.href = \"/auth/sign-in\";\r\n      }\r\n    }\r\n  }\r\n\r\n  signOut(): void {\r\n    let signOutMessage = {channel: \"auth\", type: \"sign_out\"}\r\n    this.socketService.sendMessage(signOutMessage)\r\n    sessionStorage.clear();\r\n    document.location.href = \"/\";\r\n  }\r\n\r\n}\r\n","<div class=\"header\">\r\n    <a href=\"/\" class=\"home\">\r\n        <img alt=\"Cowork\" src=\"../../../assets/icons/icon.png\" height=\"48\" width=\"48\" style=\"margin-left: -4px;\">\r\n    </a>\r\n    <nav class=\"options\">\r\n        <a (click)=\"signOut()\" tabindex=\"0\">Sign out</a>\r\n    </nav>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { MenuComponent } from './menu/menu.component';\r\n\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: './home.component.html',\r\n  styleUrls: ['./home.component.css']\r\n})\r\nexport class HomeComponent implements OnInit {\r\n  location: Location;\r\n\r\n  constructor(location: Location) {\r\n    this.location = location;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.location.path() == '/home') {\r\n      this.location.replaceState('/home/tasks');\r\n    }\r\n    this.updateActivity(this.location.path(), this.location.getState());\r\n    this.location.onUrlChange(this.updateActivity);\r\n  }\r\n\r\n  updateActivity(url: string, state: unknown): void {\r\n    window.history.pushState(null, url, url);\r\n    let activity: string = MenuComponent.getActivity(url);\r\n    console.log(activity);\r\n    if (activity == '') {\r\n      let activityContainer: Element = document.getElementById(\"activity-container\");\r\n      let room: Element = document.getElementsByClassName(\"room\")[0];\r\n      activityContainer.classList.add(\"invisible\");\r\n      room.classList.toggle(\"visible-mobile\");\r\n    }\r\n    else {\r\n      let activityContainer: Element = document.getElementById(\"activity-container\");\r\n      activityContainer.classList.remove(\"invisible\");\r\n      let room: Element = document.getElementsByClassName(\"room\")[0];\r\n      room.classList.remove(\"visible-mobile\");\r\n    }\r\n    \r\n  }\r\n\r\n  static getActivity(path: string): string {\r\n    let splitPath: string[] = path.split('/');\r\n    let activity: string = splitPath[2];\r\n    console.log(activity);\r\n    activity = activity.replace('/', '');\r\n    if (activity == '') {\r\n      activity = 'room';\r\n    }\r\n    return activity;\r\n  }\r\n\r\n}\r\n","<div class=\"home\">\r\n    <div class=\"header\">\r\n        <app-header></app-header>\r\n    </div>\r\n    <div class=\"app\">\r\n        <app-menu id=\"menu\"></app-menu>\r\n        <app-activity-container id=\"activity-container\"></app-activity-container>\r\n        <app-room id=\"room\"></app-room>\r\n    </div>\r\n</div>","import { Component, OnInit } from '@angular/core';\r\nimport { Location } from '@angular/common';\r\nimport { faHome, faStore, faComments, faHourglass, faChartPie, faTasks, faCalendar, faCog } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\n@Component({\r\n  selector: 'app-menu',\r\n  templateUrl: './menu.component.html',\r\n  styleUrls: ['./menu.component.css']\r\n})\r\nexport class MenuComponent implements OnInit {\r\n  location: Location;\r\n  faHome = faHome;\r\n  faStore = faStore;\r\n  faComments = faComments;\r\n  faHourglass = faHourglass;\r\n  faChartPie = faChartPie;\r\n  faTasks = faTasks;\r\n  faCalendar = faCalendar;\r\n  faCog = faCog;\r\n\r\n  constructor(location: Location) {\r\n    this.location = location;\r\n    this.updateActivity.bind(this);\r\n    this.location.onUrlChange(this.updateActivity);\r\n  }\r\n\r\n  navigate(s: string, event: Event): void {\r\n    let activity: string = MenuComponent.getActivity(s);\r\n    event.preventDefault();\r\n    document.getElementById(activity + \"-nav\").blur();\r\n    this.location.replaceState(s);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.updateActivity(this.location.path(), this.location.getState());\r\n  }\r\n\r\n  updateActivity(url: string, state: unknown): void {\r\n    // ALERT: REDUNDANCY\r\n    let activity: string = MenuComponent.getActivity(url);\r\n    let selectedElements: HTMLCollection = document.getElementsByClassName(\"selected\");\r\n    let i: number = 0;\r\n    for (let i: number = 0; i < selectedElements.length; i++) {\r\n      let selectedElement: Element = selectedElements[i];\r\n      selectedElement.classList.remove(\"selected\");\r\n    }\r\n    let newVisibleActivity: Element = document.getElementById(activity + \"-nav\");\r\n    newVisibleActivity.classList.add(\"selected\");\r\n  }\r\n\r\n  static getActivity(path: string): string {\r\n    let splitPath: string[] = path.split('/');\r\n    let activity: string = splitPath[2];\r\n    activity = activity.replace('/', '');\r\n    return activity;\r\n  }\r\n\r\n}\r\n","<nav>\r\n    <a tabindex=\"0\" (keydown.enter)=\"navigate('/home', $event)\" (click)=\"navigate('/home', $event)\" id=\"room-nav\" href=\"/home\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-house-door\" viewBox=\"0 0 16 16\">\r\n            <path fill-rule=\"evenodd\" d=\"M7.646 1.146a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5H9.5a.5.5 0 0 1-.5-.5v-4H7v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6zM2.5 7.707V14H6v-4a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4h3.5V7.707L8 2.207l-5.5 5.5z\"/>\r\n            <path fill-rule=\"evenodd\" d=\"M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z\"/>\r\n        </svg>\r\n        <span>Test</span>\r\n    </a>\r\n    <a tabindex=\"0\" (keydown.enter)=\"navigate('/home/store', $event)\" (click)=\"navigate('/home/store', $event)\" id=\"store-nav\" href=\"/home/store\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-shop\" viewBox=\"0 0 16 16\">\r\n            <path fill-rule=\"evenodd\" d=\"M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.371 2.371 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976l2.61-3.045zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0zM1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5zM4 15h3v-5H4v5zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-3zm3 0h-2v3h2v-3z\"/>\r\n        </svg>\r\n        <span>Store</span>\r\n    </a>\r\n    <a tabindex=\"0\" (keydown.enter)=\"navigate('/home/chat', $event)\" (click)=\"navigate('/home/chat', $event)\" id=\"chat-nav\" href=\"/home/chat\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chat\" viewBox=\"0 0 16 16\">\r\n            <path fill-rule=\"evenodd\" d=\"M2.678 11.894a1 1 0 0 1 .287.801 10.97 10.97 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8.06 8.06 0 0 0 8 14c3.996 0 7-2.807 7-6 0-3.192-3.004-6-7-6S1 4.808 1 8c0 1.468.617 2.83 1.678 3.894zm-.493 3.905a21.682 21.682 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a9.68 9.68 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9.06 9.06 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105z\"/>\r\n        </svg>\r\n        <span>Chat</span>\r\n    </a>\r\n    <a tabindex=\"0\" (keydown.enter)=\"navigate('/home/timer', $event)\" (click)=\"navigate('/home/timer', $event)\" id=\"timer-nav\" href=\"/home/timer\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-hourglass\" viewBox=\"0 0 16 16\">\r\n            <path fill-rule=\"evenodd\" d=\"M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5zm2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702c0 .7-.478 1.235-1.011 1.491A3.5 3.5 0 0 0 4.5 13v1h7v-1a3.5 3.5 0 0 0-1.989-3.158C8.978 9.586 8.5 9.052 8.5 8.351v-.702c0-.7.478-1.235 1.011-1.491A3.5 3.5 0 0 0 11.5 3V2h-7z\"/>\r\n        </svg>\r\n        <span>Timer</span>\r\n    </a>\r\n    <a tabindex=\"0\" (keydown.enter)=\"navigate('/home/stats', $event)\" (click)=\"navigate('/home/stats', $event)\" id=\"stats-nav\" href=\"/home/stats\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-graph-up\" viewBox=\"0 0 16 16\">\r\n            <path fill-rule=\"evenodd\" d=\"M0 0h1v15h15v1H0V0zm10 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.9l-3.613 4.417a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61L13.445 4H10.5a.5.5 0 0 1-.5-.5z\"/>\r\n        </svg>\r\n        <span>Stats</span>\r\n    </a>\r\n    <a tabindex=\"0\" (keydown.enter)=\"navigate('/home/tasks',$event)\" (click)=\"navigate('/home/tasks', $event)\" id=\"tasks-nav\" href=\"/home/tasks\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-list-task\" viewBox=\"0 0 16 16\">\r\n            <path fill-rule=\"evenodd\" d=\"M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H2zM3 3H2v1h1V3z\"/>\r\n            <path d=\"M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9z\"/>\r\n            <path fill-rule=\"evenodd\" d=\"M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V7zM2 7h1v1H2V7zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H2zm1 .5H2v1h1v-1z\"/>\r\n        </svg>\r\n        <span>Tasks</span>\r\n    </a>\r\n    <a tabindex=\"0\" (keydown.enter)=\"navigate('/home/settings', $event)\" (click)=\"navigate('/home/settings', $event)\" id=\"settings-nav\" href=\"/home/settings\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-gear\" viewBox=\"0 0 16 16\">\r\n            <path fill-rule=\"evenodd\" d=\"M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z\"/>\r\n            <path fill-rule=\"evenodd\" d=\"M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z\"/>\r\n        </svg>\r\n        <span>Settings</span>\r\n    </a>\r\n</nav>","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RoomChangeService {\r\n\r\n  changeSource: Subject<string> = new Subject<any>();\r\n  public roomId: Observable<string> = this.changeSource.asObservable();\r\n\r\n  currentRoomId: string;\r\n\r\n  constructor() { }\r\n\r\n  setRoom(roomId: string): void {\r\n    this.changeSource.next(roomId);\r\n    this.currentRoomId = roomId;\r\n  }\r\n}\r\n","export const images: Array<string> = ['floor.png', 'alien.png', 'bear.png', 'bear-shadow.png'];","// this might not be the best way to create these objects!\r\n// simply exists to return object that matches server's id\r\n// variant on factory pattern. May result in duplicate code; beware!\r\n\r\nimport { Player } from './root/player/player';\r\nimport { TileMap } from './root/tile-map'\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { GameObject, Vector } from 'kontra';\r\nimport { RoomComponent } from './room.component';\r\n\r\nexport class ObjectFactory {\r\n    socketService: SocketService;\r\n    room: RoomComponent;\r\n\r\n    constructor(room: RoomComponent, socketService: SocketService) {\r\n        this.room = room;\r\n        this.socketService = socketService;\r\n    }\r\n\r\n    makeObject(objects: any, data: any): GameObject {\r\n        let sceneId: number = data[\"scene_id\"];\r\n        let object: GameObject;\r\n        switch(sceneId) { \r\n            case 0: { \r\n                // tile map\r\n                object = new TileMap(data[\"width\"],\r\n                    data[\"height\"], data[\"layers\"], this.socketService);\r\n                break;\r\n            } \r\n            case 1: { \r\n                // player\r\n                console.log(data);\r\n                object = new Player(this.room, data[\"id\"], data[\"display_name\"], new Vector(data[\"translation_x\"], data[\"translation_y\"]));\r\n\r\n                /* create the task popup\r\n                OMITTED FOR USER TESTS--WILL ASK USERS WHAT THEY WOULD DO INSTEAD\r\n                \r\n                const componentFactory = this.componentFactoryResolver.resolveComponentFactory(TaskPopupComponent);\r\n\r\n                const viewContainerRef = this.taskHost.viewContainerRef;\r\n            \r\n                let componentRef: ComponentRef<TaskPopupComponent>;\r\n            \r\n                componentRef = viewContainerRef.createComponent(componentFactory, data.index);\r\n            \r\n                let instance: TaskPopupComponent = <TaskPopupComponent>componentRef.instance;\r\n                instance.data = data;\r\n                this.tasks.set(data.task_id, instance);\r\n                this.taskViewRefs.set(data.task_id, componentRef.hostView);\r\n                */\r\n                break; \r\n            }\r\n        }\r\n        return object;\r\n    }\r\n}","import { Component, ComponentFactoryResolver, ComponentRef, OnInit, ViewChild } from '@angular/core';\r\nimport { init, TileEngine, load, setImagePath, imageAssets, GameLoop, GameObject, Vector } from 'kontra';\r\nimport { Handler } from 'src/app/handler';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { RoomChangeService } from '../room-change.service';\r\n\r\nimport { images } from \"./images\";\r\n\r\nimport { ObjectFactory } from './object-factory'\r\nimport { Player } from './root/player/player';\r\nimport { PlayerTooltipDirective } from './root/player/player-tooltip.directive';\r\nimport { PlayerTooltipComponent } from './root/player/player-tooltip/player-tooltip.component';\r\n\r\nimport { TileMap } from './root/tile-map'\r\n\r\n@Component({\r\n  selector: 'app-room',\r\n  templateUrl: './room.component.html',\r\n  styleUrls: ['./room.component.css']\r\n})\r\n\r\nexport class RoomComponent extends Handler implements OnInit {\r\n\r\n  @ViewChild(PlayerTooltipDirective, { static: true }) public playerTooltipHost: PlayerTooltipDirective;\r\n\r\n  objects: Map<string, any>;\r\n\r\n  objectFactory: ObjectFactory;\r\n\r\n  roomChangeService: RoomChangeService;\r\n  socketService: SocketService;\r\n\r\n  componentFactoryResolver: ComponentFactoryResolver;\r\n\r\n  constructor(socketService: SocketService, roomChangeService: RoomChangeService, componentFactoryResolver: ComponentFactoryResolver) {\r\n    super();\r\n    this.socketService = socketService;\r\n    this.roomChangeService = roomChangeService;\r\n    this.objects = new Map<string, any>();\r\n    this.objectFactory = new ObjectFactory(this, socketService);\r\n    this.componentFactoryResolver = componentFactoryResolver;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // register and observe socket channels\r\n    if (!this.socketService.channelIsRegistered(\"room\")) this.socketService.register(\"room\");\r\n    this.socketService.channelReply.get(\"room\").subscribe(msg => {\r\n      if (this[this.snakeToCamel(msg[\"type\"])] != undefined) this[this.snakeToCamel(msg[\"type\"])](msg);\r\n    });\r\n\r\n    this.roomChangeService.roomId.subscribe(msg => this.onRoomChange(msg));\r\n\r\n    let { canvas, context } = init();\r\n    canvas.width = canvas.clientWidth;\r\n    canvas.height = canvas.clientHeight;\r\n\r\n    setImagePath('/assets/room/');\r\n    load.apply(\r\n      null, images\r\n    );\r\n\r\n    document.onresize = function() {\r\n      canvas.width = canvas.clientWidth;\r\n      canvas.height = canvas.clientHeight;\r\n    };\r\n\r\n  }\r\n\r\n  addPersistObject(msg: any): void {\r\n    console.log(msg);\r\n    let object: any = this.objectFactory.makeObject(this.objects, msg[\"data\"]);\r\n    if (msg[\"data\"][\"parent_id\"] != null) {\r\n      this.objects.get(msg[\"data\"][\"parent_id\"]).addChild(object);\r\n    }\r\n    else {\r\n      let loop: GameLoop = GameLoop({\r\n        update: function() {\r\n          object.update();\r\n        },\r\n        render: function() {\r\n          object.render();\r\n        }\r\n      });\r\n    \r\n      // start the loop\r\n      loop.start();\r\n    }\r\n    this.objects.set(msg[\"data\"][\"id\"], object);\r\n  }\r\n  \r\n  modifyPersistObject(msg: any): void {\r\n\t  if (this.objects.has(msg[\"id\"])) {\r\n      let object: any = this.objects.get(msg[\"id\"]);\r\n      object[this.snakeToCamel(msg[\"method\"])](msg);\r\n    }\r\n  }\r\n\r\n  peerChangedActiveListing(msg: any): void {\r\n    let player: any = this.objects.get(msg[\"persist_object_id\"]);\r\n    if (msg[\"public\"] == true) {\r\n      let player: any = this.objects.get(msg[\"persist_object_id\"]);\r\n    }\r\n  }\r\n\r\n  removePersistObject(msg: any): void {\r\n    if (this.objects.has(msg[\"id\"])) {\r\n      let object: GameObject = this.objects.get(msg[\"id\"]);\r\n      object.parent.removeChild(object);\r\n    }\r\n  }\r\n\r\n  onRoomChange(roomId: string): void {\r\n  \r\n  }\r\n\r\n  openPlayerTooltip(displayName: string, id: string, position: Vector) {\r\n    let roomPosition: Vector = new Vector(document.getElementById(\"game\").offsetLeft, document.getElementById(\"game\").offsetTop);\r\n\r\n    let playerPositionCanvas: Vector = roomPosition.add(position).add(new Vector(64, 0));\r\n\r\n    const viewContainerRef = this.playerTooltipHost.viewContainerRef;\r\n    viewContainerRef.clear();\r\n\r\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(PlayerTooltipComponent);\r\n\r\n    let componentRef: ComponentRef<PlayerTooltipComponent>;\r\n\r\n    componentRef = viewContainerRef.createComponent(componentFactory);\r\n\r\n    let instance: PlayerTooltipComponent = <PlayerTooltipComponent>componentRef.instance;\r\n    instance.onClose = this.closePlayerTooltip.bind(this);\r\n    instance.displayName = displayName;\r\n    instance.id = id;\r\n    instance.position = playerPositionCanvas;\r\n  }\r\n\r\n  closePlayerTooltip() {\r\n    console.log(\"working on it luv\");\r\n    const viewContainerRef = this.playerTooltipHost.viewContainerRef;\r\n    viewContainerRef.clear();\r\n  }\r\n}\r\n","<div class=\"room\">\r\n    <canvas id=\"game\" width=\"128\" height=\"128\">\r\n        <button>Move North</button>\r\n        <button>Move South</button>\r\n        <button>Move East</button>\r\n        <button>Move West</button>\r\n        <div id=\"game-log\" role=\"log\">\r\n            \r\n        </div>\r\n    </canvas>\r\n    <ng-template appPlayerTooltip></ng-template>\r\n</div>","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appPlayerTooltip]'\r\n})\r\nexport class PlayerTooltipDirective {\r\n  \r\n  public viewContainerRef: ViewContainerRef;\r\n\r\n  constructor(viewContainerRef: ViewContainerRef) {\r\n    this.viewContainerRef = viewContainerRef\r\n  }\r\n\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Vector } from 'kontra';\r\nimport { Subscription } from 'rxjs';\r\nimport { Handler } from 'src/app/handler';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\nimport { Player } from '../player';\r\n\r\n@Component({\r\n  selector: 'app-player-tooltip',\r\n  templateUrl: './player-tooltip.component.html',\r\n  styleUrls: ['./player-tooltip.component.css']\r\n})\r\nexport class PlayerTooltipComponent extends Handler implements OnInit, OnDestroy {\r\n\r\n  displayName: string;\r\n  id: string;\r\n  activeTaskData: any = {\"task_id\": null, \"title\": \"This user's active task is not currently available.\"};\r\n  position: Vector;\r\n\r\n  x: string;\r\n  y: string;\r\n\r\n  onClose: Function;\r\n\r\n  socketService: SocketService;\r\n\r\n  subscription: Subscription;\r\n\r\n  constructor(socketService: SocketService) {\r\n    super();\r\n    this.socketService = socketService;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const width: number = 300;\r\n    const height: number = 150;\r\n\r\n    const marginBottom: number = 18;\r\n\r\n    this.subscription = this.socketService.channelReply.get(\"room\").subscribe(msg => {\r\n      if (msg[\"type\"] == \"request_active_task_for_account\") this[this.snakeToCamel(msg[\"type\"])](msg);\r\n    });\r\n\r\n    this.x = (this.position.x - (width / 2) - (32 / 2)).toString() + \"px\";\r\n    this.y = (this.position.y - height - marginBottom).toString() + \"px\";\r\n\r\n    this.socketService.sendMessage({ channel: \"tasks\", type: \"request_active_task_for_account\", \"persist_object_id\": this.id });\r\n  }\r\n\r\n  requestActiveTaskForAccount(msg: any): void {\r\n    this.activeTaskData = msg;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n}\r\n","<div class=\"tooltip\" [style.left]=\"this.x\" [style.top]=\"this.y\" cdkDrag>\r\n    <div class=\"tooltip-header\"><h3>{{ this.displayName }}</h3><a (keydown.enter)=\"this.onClose()\" (click)=\"this.onClose()\" class=\"close-task\">X</a></div>\r\n    <span>{{ this.displayName }} is currently working on:</span>\r\n    <app-task [isListing]=\"false\" [data]=\"this.activeTaskData\"></app-task>\r\n</div>","import { imageAssets, Sprite, SpriteSheet, track, Vector, Text, Button, getCanvas, getWorldRect } from 'kontra';\r\nimport { RoomComponent } from '../../room.component';\r\n\r\nconst speed: number = 5;\r\n\r\nexport class Player extends Sprite.class {\r\n    room: RoomComponent;\r\n    id: string;\r\n    displayName: string;\r\n    target: Vector;\r\n    direction: Vector;\r\n\r\n    playingAnimation: string;\r\n\r\n    shadow: Sprite;\r\n\r\n    constructor(room: RoomComponent, id: string, displayName: string, position: Vector) {\r\n        let spriteSheet = SpriteSheet({\r\n            image: imageAssets[\"bear\"],\r\n            frameWidth: 128,\r\n            frameHeight: 128,\r\n            animations: {\r\n                walkFR: {\r\n                    frames: '0..47',\r\n                    frameRate: 48\r\n                },\r\n                idleFR: {\r\n                    frames: '48..195',\r\n                    frameRate: 0\r\n                },\r\n                walkFL: {\r\n                    frames: '49..96',\r\n                    frameRate: 48\r\n                },\r\n                idleFL: {\r\n                    frames: '97..195',\r\n                    frameRate: 0\r\n                },\r\n                walkBR: {\r\n                    frames: '98..145',\r\n                    frameRate: 48\r\n                },\r\n                idleBR: {\r\n                    frames: '146...195',\r\n                    frameRate: 0\r\n                },\r\n                walkBL: {\r\n                    frames: '147..194',\r\n                    frameRate: 48\r\n                },\r\n                idleBL: {\r\n                    frames: '195..200',\r\n                    frameRate: 0\r\n                }\r\n            }\r\n        });\r\n\r\n        super({\r\n            type: 'player',\r\n            x: position.x,\r\n            y: position.y,\r\n            dx: 0,\r\n            dy: 0,\r\n            image: spriteSheet.frame[48],\r\n            animations: spriteSheet.animations,\r\n            children: [new Button({\r\n                // button properties\r\n                \r\n                room: room,\r\n                persistObjectId: id,\r\n                \r\n                padX: 64,\r\n                padY: 64,\r\n                color: \"transparent\",\r\n                onFocus: function() {\r\n                    // read out to the screen reader\r\n                },\r\n                render: function() {\r\n                    if (this.pressed) {\r\n                        if (!(this.previouslyPressed == true)) {\r\n                            this.previouslyPressed = true;\r\n                            // open their little profile\r\n                            // with current task etc.\r\n                            console.log(displayName);\r\n                            room.openPlayerTooltip(displayName, id, Vector(getWorldRect(this).x, getWorldRect(this).y));\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (this.previouslyPressed == true) {\r\n                            this.previouslyPressed = false;\r\n                            // close the tooltip specifically (must be THIS one--what about othr players?)\r\n                        }\r\n                    }\r\n\r\n\r\n                    if (this.hovered) {\r\n                        if (!(this.previouslyHovered == true)) {\r\n                            this.previouslyHovered = true;\r\n                            getCanvas().style.cursor = \"pointer\";\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (this.previouslyHovered == true) {\r\n                            this.previouslyHovered = false;\r\n                            getCanvas().style.cursor = \"initial\";\r\n                        }\r\n                    }\r\n\r\n                    if (this.focused) {\r\n                        this.context.setLineDash([8,10]);\r\n                        this.context.lineWidth = 3;\r\n                        this.context.strokeStyle = 'red';\r\n                        this.context.strokeRect(0, 0, this.width, this.height);\r\n                      }\r\n                }\r\n            })]\r\n        });\r\n\r\n        this.room = room;\r\n\r\n        this.playAnimation('idleFR');\r\n        this.playingAnimation = 'idleFR';\r\n\r\n        this.id = id;\r\n        this.displayName = displayName;\r\n        this.target = Vector(this.x, this.y);\r\n        track(this);\r\n\r\n        this.shadow = Sprite({\r\n            image: imageAssets[\"bear-shadow\"],\r\n            opacity: 0.5,\r\n            y: 96\r\n        });\r\n    }\r\n\r\n    update(): void {\r\n        let distance: number = this.target.distance(Vector(this.x, this.y));\r\n        // also cancel movement upon collision! maybe upon collision, set target to position?\r\n        if (distance > 4) {\r\n            this.velocity = Vector(this.direction.x * speed, this.direction.y * speed);\r\n        }\r\n        else if (!this.playingAnimation.includes('idle')) {\r\n            this.playingAnimation = this.playingAnimation.replace('walk', 'idle');\r\n            this.playAnimation(this.playingAnimation);\r\n            this.reportLocation();\r\n            this.target = Vector(this.x, this.y);\r\n            this.dx = 0;\r\n            this.dy = 0;\r\n        }\r\n        super.update();\r\n    }\r\n\r\n    draw(): void {\r\n        this.addChild(this.shadow);\r\n        this.shadow.render();\r\n        this.removeChild(this.shadow);\r\n\r\n        super.draw();\r\n\r\n        let nameTag: Text = new Text({\r\n            text: this.displayName,\r\n            font: '16px Arial',\r\n            color: 'black',\r\n            width: 128,\r\n            x: 0,\r\n            y: 128,\r\n            anchor: {x: 0, y: 0},\r\n            textAlign: 'center'\r\n        });\r\n\r\n        nameTag.render();\r\n        \r\n    }\r\n\r\n    setTarget(msg: any): void {\r\n        this.target = Vector(msg[\"position_x\"] - 128 / 2, msg[\"position_y\"] - 128 / 2);\r\n        this.direction = Vector(this.target.x - this.x, this.target.y - this.y).normalize();\r\n        let left: boolean = this.direction.x <= 0;\r\n        let right: boolean = !left;\r\n        let backward: boolean = this.direction.y <= 0;\r\n        let forward: boolean = !backward;\r\n        if (forward && right) {\r\n            this.playingAnimation = 'walkFR';\r\n        }\r\n        if (forward && left) {\r\n            this.playingAnimation = 'walkFL';\r\n        }\r\n        if (backward && right) {\r\n            this.playingAnimation = 'walkBR';\r\n        }\r\n        if (backward && left) {\r\n            this.playingAnimation = 'walkBL';\r\n        }\r\n        this.playAnimation(this.playingAnimation);\r\n    }\r\n\r\n    reportLocation(): void {\r\n        let log: HTMLElement = document.getElementById(\"game-log\");\r\n        let message: HTMLParagraphElement = document.createElement(\"p\");\r\n        message.innerHTML = this.displayName + \" is now at \" + Math.round(this.x) + \" on the x-axis and \" + Math.round(this.y) + \" on the y-axis.\";\r\n        log.appendChild(message);\r\n    }\r\n\r\n}","import { TileEngine, imageAssets, initPointer, track, getPointer, GameObject, onPointerUp, onPointerDown, Button } from 'kontra';\r\nimport { SocketService } from 'src/app/socket/socket.service';\r\n\r\nconst epsilon = 0.0000000000001;\r\n\r\nexport class TileMap extends GameObject.class {\r\n    socketService: SocketService;\r\n    tileEngine: TileEngine;\r\n\r\n    moveButton: Button;\r\n  \r\n    constructor(width: number, height: number, layers: object[], socketService: SocketService) {\r\n      super();\r\n      let img: HTMLImageElement = imageAssets['floor'];\r\n      this.tileEngine = TileEngine({\r\n        // tile size\r\n        tilewidth: 128,\r\n        tileheight: 128,\r\n    \r\n        // map size in tiles\r\n        width: width,\r\n        height: height,\r\n    \r\n        // tileset object\r\n        tilesets: [{\r\n          firstgid: 1,\r\n          image: img\r\n        }],\r\n    \r\n        // layer object\r\n        layers: layers,\r\n      });\r\n\r\n      this.socketService = socketService;\r\n      initPointer();\r\n\r\n      this.moveButton = new Button({\r\n        // button properties\r\n        socketService: socketService,\r\n        padX: width * this.tileEngine.tilewidth,\r\n        padY: height * this.tileEngine.tileheight,\r\n        color: \"red\",\r\n        onFocus: function() {\r\n            // read out to the screen reader\r\n        },\r\n        render: function() {\r\n            if (this.pressed) {\r\n              this.disable();\r\n              this.willEnable = false;\r\n              this.pressed = false;\r\n              let pointer: any = getPointer();\r\n              // this is pretty gross, but the server typechecks for floats\r\n              this.socketService.sendMessage({channel: \"room\", type: \"set_target\", position_x: (pointer.x + epsilon), position_y: (pointer.y + epsilon)})\r\n            }\r\n            else if (this.disabled && !this.willEnable) {\r\n              console.log(\"unpressed\");\r\n              this.willEnable = true;\r\n              new Promise(resolve => setTimeout(this.enable.bind(this), 300));\r\n            }\r\n        }\r\n    });\r\n\r\n    this.addChild(this.moveButton);\r\n    }\r\n\r\n    render(): void {\r\n      this.tileEngine.render();\r\n      this.moveButton.render();\r\n      super.render();\r\n    }\r\n\r\n    addChild(object: GameObject): void {\r\n      this.tileEngine.addObject(object);\r\n      super.addChild(object);\r\n      console.log(this.children);\r\n    }\r\n\r\n    removeChild(object: GameObject): void {\r\n      this.tileEngine.removeObject(object);\r\n      super.removeChild(object);\r\n    }\r\n  }","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-landing-page',\r\n  templateUrl: './landing-page.component.html',\r\n  styleUrls: ['./landing-page.component.css']\r\n})\r\nexport class LandingPageComponent implements OnInit {\r\n\r\n  loggedIn: boolean = sessionStorage.getItem(\"token\") != null;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void { }\r\n\r\n}\r\n","<div class=\"landing-page\">\r\n    <nav id=\"options\">\r\n        <div *ngIf=\"loggedIn; then thenBlock else elseBlock\"></div>\r\n        <ng-template #thenBlock><a href=\"/home\">Continue to Cowork</a></ng-template>\r\n        <ng-template #elseBlock><a href=\"/auth/sign-in\" id=\"entry-link\">Have an alpha account? Sign in</a></ng-template>\r\n    </nav>\r\n    <div class=\"statement\">\r\n        <h1>Cowork is coming soon.</h1>\r\n        <h2>We can't wait, either.</h2>\r\n    </div>\r\n</div>","import { Component, OnInit, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-panel-header',\r\n  templateUrl: './panel-header.component.html',\r\n  styleUrls: ['./panel-header.component.css']\r\n})\r\nexport class PanelHeaderComponent implements OnInit {\r\n  @Input() header: String;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"header\">\r\n    <h1>{{ header }}</h1>\r\n</div>","import { Injectable, OnInit } from '@angular/core';\r\n\r\nimport { webSocket, WebSocketSubject } from 'rxjs/webSocket';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { HttpClient } from '@angular/common/http';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SocketService {\r\n\r\n  socket: WebSocketSubject<any>;\r\n\r\n  replySource: Subject<any>;\r\n  public reply: Observable<any>;\r\n\r\n  replySources: Map<string, Subject<any>>;\r\n  public channelReply: Map<string, Observable<any>>;\r\n\r\n  httpClient: HttpClient;\r\n\r\n  unsentMessages: Array<any> = [];\r\n  \r\n  constructor(httpClient: HttpClient) {\r\n    this.httpClient = httpClient;\r\n    this.replySource = new Subject<any>();\r\n    this.reply = this.replySource.asObservable();\r\n    this.replySources = new Map<string, Subject<any>>();\r\n    this.channelReply = new Map<string, Observable<any>>();\r\n    this.establishWebsocket();\r\n  }\r\n\r\n  establishWebsocket() {\r\n    this.httpClient.get('https://ws.cowork.ac', {responseType: 'text', withCredentials: true}).subscribe(data => {\r\n      this.socket = webSocket('wss://ws.cowork.ac:4433');\r\n\r\n      this.socket.subscribe(\r\n        msg => {\r\n\r\n          if (msg[\"password_correct\"] == true) {\r\n            sessionStorage.setItem(\"username\", msg[\"username\"]);\r\n            sessionStorage.setItem(\"display_name\", msg[\"display_name\"]);\r\n          }\r\n\r\n          this.setResponse(msg);\r\n\r\n          // in the future, the below should be the only way to get messages.\r\n          // classes should subscribe to individual channels.\r\n          let channel: string = msg[\"channel\"];\r\n          if (this.channelIsRegistered(channel)) {\r\n            this.replySources.get(channel).next(msg);\r\n          }\r\n        },\r\n        err => console.log(err),\r\n        () => console.log('complete')\r\n      );\r\n\r\n      while (this.unsentMessages.length > 0) {\r\n        this.sendMessage(this.unsentMessages.pop());\r\n      }\r\n    });\r\n  }\r\n\r\n  setResponse(msg: any) {\r\n    this.replySource.next(msg);\r\n  }\r\n\r\n  sendMessage(msg: any): void {\r\n    if (this.socket === undefined) {\r\n      this.unsentMessages.push(msg);\r\n    }\r\n    else {\r\n      this.socket.next(msg);\r\n    }\r\n  }\r\n\r\n  channelIsRegistered(channel: string) {\r\n    return this.replySources.has(channel);\r\n  }\r\n\r\n  register(channel: string) {\r\n    this.replySources.set(channel, new Subject<any>());\r\n    this.channelReply.set(channel, this.replySources.get(channel).asObservable());\r\n  }\r\n}\r\n","import { DOCUMENT } from '@angular/common';\r\nimport { Inject, Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\nexport interface monetizedDocument extends Document {monetization: any}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WebMonetizationService {\r\n  monetizationSource: Subject<string>;\r\n  public monetization: Observable<string>;\r\n  document: monetizedDocument;\r\n\r\n  constructor(@Inject(DOCUMENT) document: Document) {\r\n    this.document = <monetizedDocument> document;\r\n    this.monetizationSource = new Subject<string>();\r\n    this.monetization = this.monetizationSource.asObservable();\r\n    if (this.webMonetizationExists()) {\r\n      this.document.monetization.addEventListener('monetizationpending', (paymentPointer: string, requestId: string) => this.monetizationSource.next(\"pending\"));\r\n      this.document.monetization.addEventListener('monetizationstart', (paymentPointer: string, requestId: string) => this.monetizationSource.next(\"started\"));\r\n      this.document.monetization.addEventListener('monetizationstop', (paymentPointer: string, requestId: string) => this.monetizationSource.next(\"stopped\"));\r\n    }\r\n  }\r\n\r\n  public webMonetizationExists(): boolean {\r\n    return !!this.document && !!this.document.monetization;\r\n  }\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"]}